!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@antv/g")):"function"==typeof define&&define.amd?define(["@antv/g"],e):"object"==typeof exports?exports.GUI=e(require("@antv/g")):t.GUI=e(t.G)}(window,(function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(e,n){e.exports=t},,function(t,e,n){var i=n(4).parse;i.parseSVG=i,i.makeAbsolute=function(t){var e,n={x:0,y:0},i={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return t.forEach((function(t){for(var r in"moveto"===t.command&&(e=t),t.x0=n.x,t.y0=n.y,i)r in t&&(t[r]+=t.relative?t[i[r]]:0);"x"in t||(t.x=n.x),"y"in t||(t.y=n.y),t.relative=!1,t.code=t.code.toUpperCase(),"closepath"==t.command&&(t.x=e.x,t.y=e.y),n=t})),t},t.exports=i},function(t,e,n){var i=n(5),r=n(6),o=Object.hasOwnProperty,s=Object.create(null);for(var a in i)o.call(i,a)&&(s[i[a]]=a);var l=t.exports={to:{},get:{}};function u(t,e,n){return Math.min(Math.max(e,t),n)}function c(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}l.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=l.get.hsl(t),n="hsl";break;case"hwb":e=l.get.hwb(t),n="hwb";break;default:e=l.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},l.get.rgb=function(t){if(!t)return null;var e,n,r,s=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var a=2*n;s[n]=parseInt(e.slice(a,a+2),16)}r&&(s[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)s[n]=parseInt(e[n]+e[n],16);r&&(s[3]=parseInt(r+r,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)s[n]=parseInt(e[n+1],0);e[4]&&(e[5]?s[3]=.01*parseFloat(e[4]):s[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:o.call(i,e[1])?((s=i[e[1]])[3]=1,s):null:null;for(n=0;n<3;n++)s[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?s[3]=.01*parseFloat(e[4]):s[3]=parseFloat(e[4]))}for(n=0;n<3;n++)s[n]=u(s[n],0,255);return s[3]=u(s[3],0,1),s},l.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(n)?1:n,0,1)]}return null},l.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(e){var n=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(n)?1:n,0,1)]}return null},l.to.hex=function(){var t=r(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},l.to.rgb=function(){var t=r(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},l.to.rgb.percent=function(){var t=r(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+i+"%)":"rgba("+e+"%, "+n+"%, "+i+"%, "+t[3]+")"},l.to.hsl=function(){var t=r(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},l.to.hwb=function(){var t=r(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},l.to.keyword=function(t){return s[t.slice(0,3)]}},function(t,e,n){"use strict";function i(t,e,n,r){this.message=t,this.expected=e,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,i)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(i,Error),i.buildMessage=function(t,e){var n={literal:function(t){return'"'+r(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}function r(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+i(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+i(t)}))}return"Expected "+function(t){var e,i,r,o=new Array(t.length);for(e=0;e<t.length;e++)o[e]=(r=t[e],n[r.type](r));if(o.sort(),o.length>0){for(e=1,i=1;e<o.length;e++)o[e-1]!==o[e]&&(o[i]=o[e],i++);o.length=i}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+function(t){return t?'"'+r(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:i,parse:function(t,e){e=void 0!==e?e:{};var n,r={},o={svg_path:J},s=J,a=function(t,e){return function(t,e){if(!e)return[t];for(var n=[t],i=0,r=e.length;i<r;i++)n[i+1]=e[i][1];return n}(t,e)},l=/^[Mm]/,u=Z(["M","m"],!1,!1),c=/^[Zz]/,h=Z(["Z","z"],!1,!1),d=/^[Ll]/,p=Z(["L","l"],!1,!1),f=function(t,e){return xt(t,e)},g=/^[Hh]/,m=Z(["H","h"],!1,!1),b=/^[Vv]/,y=Z(["V","v"],!1,!1),v=/^[Cc]/,x=Z(["C","c"],!1,!1),w=/^[Ss]/,S=Z(["S","s"],!1,!1),k=/^[Qq]/,P=Z(["Q","q"],!1,!1),A=/^[Tt]/,L=Z(["T","t"],!1,!1),M=/^[Aa]/,E=Z(["A","a"],!1,!1),C=/^[01]/,B=Z(["0","1"],!1,!1),O=q(",",!1),j=function(t){return t.join("")},N=q(".",!1),T=/^[eE]/,_=Z(["e","E"],!1,!1),z=/^[+\-]/,G=Z(["+","-"],!1,!1),H=/^[0-9]/,F=Z([["0","9"]],!1,!1),I=/^[ \t\n\r]/,D=Z([" ","\t","\n","\r"],!1,!1),V=0,W=[{line:1,column:1}],R=0,U=[];if("startRule"in e){if(!(e.startRule in o))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=o[e.startRule]}function q(t,e){return{type:"literal",text:t,ignoreCase:e}}function Z(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function K(e){var n,i=W[e];if(i)return i;for(n=e-1;!W[n];)n--;for(i={line:(i=W[n]).line,column:i.column};n<e;)10===t.charCodeAt(n)?(i.line++,i.column=1):i.column++,n++;return W[e]=i,i}function Y(t,e){var n=K(t),i=K(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function X(t){V<R||(V>R&&(R=V,U=[]),U.push(t))}function $(t,e,n){return new i(i.buildMessage(t,e),t,e,n)}function J(){var t,e,n,i,o;for(t=V,e=[],n=bt();n!==r;)e.push(n),n=bt();if(e!==r)if((n=function(){var t,e,n,i,o,s;if(t=V,(e=Q())!==r){for(n=[],i=V,o=[],s=bt();s!==r;)o.push(s),s=bt();for(o!==r&&(s=Q())!==r?i=o=[o,s]:(V=i,i=r);i!==r;){for(n.push(i),i=V,o=[],s=bt();s!==r;)o.push(s),s=bt();o!==r&&(s=Q())!==r?i=o=[o,s]:(V=i,i=r)}n!==r?(t,e=a(e,n),t=e):(V=t,t=r)}else V=t,t=r;return t}())===r&&(n=null),n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r?(t,t=e=function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e=e.concat.apply(e,t[n]);var i=e[0];return i&&"m"==i.code&&(delete i.relative,i.code="M"),e}(n)):(V=t,t=r)}else V=t,t=r;else V=t,t=r;return t}function Q(){var e,n,i,o,s,c;if(e=V,(n=function(){var e,n,i,o,s,a,c;e=V,l.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(u));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=at())!==r?(s=V,(a=ht())===r&&(a=null),a!==r&&(c=et())!==r?s=a=[a,c]:(V=s,s=r),s===r&&(s=null),s!==r?(e,d=s,p=xt(h=n,[o]),d&&(p=p.concat(xt("M"==h?"L":"l",d[1]))),e=n=p):(V=e,e=r)):(V=e,e=r)}else V=e,e=r;var h,d,p;return e}())!==r){for(i=[],o=V,s=[],c=bt();c!==r;)s.push(c),c=bt();for(s!==r&&(c=tt())!==r?o=s=[s,c]:(V=o,o=r);o!==r;){for(i.push(o),o=V,s=[],c=bt();c!==r;)s.push(c),c=bt();s!==r&&(c=tt())!==r?o=s=[s,c]:(V=o,o=r)}i!==r?(e,e=n=a(n,i)):(V=e,e=r)}else V=e,e=r;return e}function tt(){var e;return(e=function(){var e,n;e=V,c.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(h));n!==r&&(e,n=xt("Z"));return e=n}())===r&&(e=function(){var e,n,i,o;e=V,d.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(p));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=et())!==r?(e,n=f(n,o),e=n):(V=e,e=r)}else V=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;e=V,g.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(m));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=nt())!==r?(e,n=xt(n,o.map((function(t){return{x:t}}))),e=n):(V=e,e=r)}else V=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;e=V,b.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(y));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=nt())!==r?(e,n=xt(n,o.map((function(t){return{y:t}}))),e=n):(V=e,e=r)}else V=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;e=V,v.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(x));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=function(){var t,e,n,i,o,s;if(t=V,(e=it())!==r){for(n=[],i=V,(o=ht())===r&&(o=null),o!==r&&(s=it())!==r?i=o=[o,s]:(V=i,i=r);i!==r;)n.push(i),i=V,(o=ht())===r&&(o=null),o!==r&&(s=it())!==r?i=o=[o,s]:(V=i,i=r);n!==r?(t,e=a(e,n),t=e):(V=t,t=r)}else V=t,t=r;return t}())!==r?(e,n=f(n,o),e=n):(V=e,e=r)}else V=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;e=V,w.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(S));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=function(){var t,e,n,i,o,s;if(t=V,(e=rt())!==r){for(n=[],i=V,(o=ht())===r&&(o=null),o!==r&&(s=rt())!==r?i=o=[o,s]:(V=i,i=r);i!==r;)n.push(i),i=V,(o=ht())===r&&(o=null),o!==r&&(s=rt())!==r?i=o=[o,s]:(V=i,i=r);n!==r?(t,e=a(e,n),t=e):(V=t,t=r)}else V=t,t=r;return t}())!==r?(e,n=f(n,o),e=n):(V=e,e=r)}else V=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;e=V,k.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(P));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=function(){var t,e,n,i,o,s;if(t=V,(e=ot())!==r){for(n=[],i=V,(o=ht())===r&&(o=null),o!==r&&(s=ot())!==r?i=o=[o,s]:(V=i,i=r);i!==r;)n.push(i),i=V,(o=ht())===r&&(o=null),o!==r&&(s=ot())!==r?i=o=[o,s]:(V=i,i=r);n!==r?(t,e=a(e,n),t=e):(V=t,t=r)}else V=t,t=r;return t}())!==r?(e,n=f(n,o),e=n):(V=e,e=r)}else V=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;e=V,A.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(L));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=function(){var t,e,n,i,o,s;if(t=V,(e=at())!==r){for(n=[],i=V,(o=ht())===r&&(o=null),o!==r&&(s=at())!==r?i=o=[o,s]:(V=i,i=r);i!==r;)n.push(i),i=V,(o=ht())===r&&(o=null),o!==r&&(s=at())!==r?i=o=[o,s]:(V=i,i=r);n!==r?(t,e=a(e,n),t=e):(V=t,t=r)}else V=t,t=r;return t}())!==r?(e,n=f(n,o),e=n):(V=e,e=r)}else V=e,e=r;return e}())===r&&(e=function(){var e,n,i,o;e=V,M.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(E));if(n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r&&(o=function(){var t,e,n,i,o,s;if(t=V,(e=st())!==r){for(n=[],i=V,(o=ht())===r&&(o=null),o!==r&&(s=st())!==r?i=o=[o,s]:(V=i,i=r);i!==r;)n.push(i),i=V,(o=ht())===r&&(o=null),o!==r&&(s=st())!==r?i=o=[o,s]:(V=i,i=r);n!==r?(t,e=a(e,n),t=e):(V=t,t=r)}else V=t,t=r;return t}())!==r?(e,n=f(n,o),e=n):(V=e,e=r)}else V=e,e=r;return e}()),e}function et(){var t,e,n,i,o,s;if(t=V,(e=at())!==r){for(n=[],i=V,(o=ht())===r&&(o=null),o!==r&&(s=at())!==r?i=o=[o,s]:(V=i,i=r);i!==r;)n.push(i),i=V,(o=ht())===r&&(o=null),o!==r&&(s=at())!==r?i=o=[o,s]:(V=i,i=r);n!==r?(t,t=e=a(e,n)):(V=t,t=r)}else V=t,t=r;return t}function nt(){var t,e,n,i,o,s;if(t=V,(e=ut())!==r){for(n=[],i=V,(o=ht())===r&&(o=null),o!==r&&(s=ut())!==r?i=o=[o,s]:(V=i,i=r);i!==r;)n.push(i),i=V,(o=ht())===r&&(o=null),o!==r&&(s=ut())!==r?i=o=[o,s]:(V=i,i=r);n!==r?(t,t=e=a(e,n)):(V=t,t=r)}else V=t,t=r;return t}function it(){var t,e,n,i,o,s,a,l,u;return t=V,(e=at())!==r?((n=ht())===r&&(n=null),n!==r&&(i=at())!==r?((o=ht())===r&&(o=null),o!==r&&(s=at())!==r?(t,l=i,u=s,t=e={x1:(a=e).x,y1:a.y,x2:l.x,y2:l.y,x:u.x,y:u.y}):(V=t,t=r)):(V=t,t=r)):(V=t,t=r),t}function rt(){var t,e,n,i,o,s;return t=V,(e=at())!==r?((n=ht())===r&&(n=null),n!==r&&(i=at())!==r?(t,s=i,t=e={x2:(o=e).x,y2:o.y,x:s.x,y:s.y}):(V=t,t=r)):(V=t,t=r),t}function ot(){var t,e,n,i,o,s;return t=V,(e=at())!==r?((n=ht())===r&&(n=null),n!==r&&(i=at())!==r?(t,s=i,t=e={x1:(o=e).x,y1:o.y,x:s.x,y:s.y}):(V=t,t=r)):(V=t,t=r),t}function st(){var t,e,n,i,o,s,a,l,u,c,h,d;return t=V,(e=lt())!==r?((n=ht())===r&&(n=null),n!==r&&(i=lt())!==r?((o=ht())===r&&(o=null),o!==r&&(s=ut())!==r&&ht()!==r&&(a=ct())!==r?((l=ht())===r&&(l=null),l!==r&&(u=ct())!==r?((c=ht())===r&&(c=null),c!==r&&(h=at())!==r?(t,t=e={rx:e,ry:i,xAxisRotation:s,largeArc:a,sweep:u,x:(d=h).x,y:d.y}):(V=t,t=r)):(V=t,t=r)):(V=t,t=r)):(V=t,t=r)):(V=t,t=r),t}function at(){var t,e,n,i;return t=V,(e=ut())!==r?((n=ht())===r&&(n=null),n!==r&&(i=ut())!==r?(t,t=e={x:e,y:i}):(V=t,t=r)):(V=t,t=r),t}function lt(){var t,e;return t=V,(e=pt())===r&&(e=mt()),e!==r&&(t,e=1*e),t=e}function ut(){var t,e,n,i;return t=V,e=V,(n=gt())===r&&(n=null),n!==r&&(i=pt())!==r?e=n=[n,i]:(V=e,e=r),e===r&&(e=V,(n=gt())===r&&(n=null),n!==r&&(i=mt())!==r?e=n=[n,i]:(V=e,e=r)),e!==r&&(t,e=1*e.join("")),t=e}function ct(){var e,n;return e=V,C.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(B)),n!==r&&(e,n="1"==n),e=n}function ht(){var t,e,n,i,o;if(t=V,e=[],(n=bt())!==r)for(;n!==r;)e.push(n),n=bt();else e=r;if(e!==r)if((n=dt())===r&&(n=null),n!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r?t=e=[e,n,i]:(V=t,t=r)}else V=t,t=r;else V=t,t=r;if(t===r){if(t=V,e=V,(n=dt())!==r){for(i=[],o=bt();o!==r;)i.push(o),o=bt();i!==r?e=n=[n,i]:(V=e,e=r)}else V=e,e=r;e!==r&&(t,e=""),t=e}return t}function dt(){var e;return 44===t.charCodeAt(V)?(e=",",V++):(e=r,X(O)),e}function pt(){var e,n,i,o;return e=V,n=V,(i=function(){var e,n,i,o,s;e=V,n=V,(i=mt())===r&&(i=null);i!==r?(46===t.charCodeAt(V)?(o=".",V++):(o=r,X(N)),o!==r&&(s=mt())!==r?n=i=[i,o,s]:(V=n,n=r)):(V=n,n=r);n===r&&(n=V,(i=mt())!==r?(46===t.charCodeAt(V)?(o=".",V++):(o=r,X(N)),o!==r?n=i=[i,o]:(V=n,n=r)):(V=n,n=r));n!==r&&(e,n=j(n));return e=n}())!==r?((o=ft())===r&&(o=null),o!==r?n=i=[i,o]:(V=n,n=r)):(V=n,n=r),n===r&&(n=V,(i=mt())!==r&&(o=ft())!==r?n=i=[i,o]:(V=n,n=r)),n!==r&&(e,n=j(n)),e=n}function ft(){var e,n,i,o,s;return e=V,n=V,T.test(t.charAt(V))?(i=t.charAt(V),V++):(i=r,X(_)),i!==r?((o=gt())===r&&(o=null),o!==r&&(s=mt())!==r?n=i=[i,o,s]:(V=n,n=r)):(V=n,n=r),n!==r&&(e,n=j(n)),e=n}function gt(){var e;return z.test(t.charAt(V))?(e=t.charAt(V),V++):(e=r,X(G)),e}function mt(){var e,n,i;if(e=V,n=[],H.test(t.charAt(V))?(i=t.charAt(V),V++):(i=r,X(F)),i!==r)for(;i!==r;)n.push(i),H.test(t.charAt(V))?(i=t.charAt(V),V++):(i=r,X(F));else n=r;return n!==r&&(e,n=n.join("")),e=n}function bt(){var e,n;return e=V,I.test(t.charAt(V))?(n=t.charAt(V),V++):(n=r,X(D)),n!==r&&(e,n=""),e=n}var yt={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var vt in yt)yt[vt.toUpperCase()]=yt[vt];function xt(t,e){e||(e=[{}]);for(var n=e.length;n--;){var i={code:t,command:yt[t]};for(var r in t==t.toLowerCase()&&(i.relative=!0),e[n])i[r]=e[n][r];e[n]=i}return e}if((n=s())!==r&&V===t.length)return n;throw n!==r&&V<t.length&&X({type:"end"}),$(U,R<t.length?t.charAt(R):null,R<t.length?Y(R,R+1):Y(R,R))}}},function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,n){"use strict";var i=n(7),r=Array.prototype.concat,o=Array.prototype.slice,s=t.exports=function(t){for(var e=[],n=0,s=t.length;n<s;n++){var a=t[n];i(a)?e=r.call(e,o.call(a)):e.push(a)}return e};s.wrap=function(t){return function(){return t(s(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,n){"use strict";n.r(e),n.d(e,"Tag",(function(){return _e})),n.d(e,"Marker",(function(){return Te})),n.d(e,"Button",(function(){return We})),n.d(e,"Breadcrumb",(function(){return Ke})),n.d(e,"Sparkline",(function(){return Gi})),n.d(e,"Slider",(function(){return Qi})),n.d(e,"Scrollbar",(function(){return er})),n.d(e,"Axis",(function(){return ro})),n.d(e,"Timeline",(function(){return oo})),n.d(e,"Continuous",(function(){return Ro})),n.d(e,"Category",(function(){return Co})),n.d(e,"Tooltip",(function(){return cs})),n.d(e,"Switch",(function(){return fs})),n.d(e,"Navigator",(function(){return co})),n.d(e,"LineCrosshair",(function(){return Ss})),n.d(e,"CircleCrosshair",(function(){return Ps})),n.d(e,"PolygonCrosshair",(function(){return Ls})),n.d(e,"Checkbox",(function(){return js})),n.d(e,"Poptip",(function(){return Vs})),n.d(e,"Layout",(function(){return Rs})),n.d(e,"degToRad",(function(){return f})),n.d(e,"radToDeg",(function(){return g})),n.d(e,"BBox",(function(){return b})),n.d(e,"getRenderBBox",(function(){return y})),n.d(e,"getCallbackValue",(function(){return x})),n.d(e,"classNames",(function(){return w})),n.d(e,"deepAssign",(function(){return E})),n.d(e,"defined",(function(){return C})),n.d(e,"ellipsisIt",(function(){return B})),n.d(e,"getEventPos",(function(){return O})),n.d(e,"renderExtDo",(function(){return T})),n.d(e,"intersection",(function(){return G})),n.d(e,"lineLen",(function(){return H})),n.d(e,"groupBy",(function(){return F})),n.d(e,"stringToHTML",(function(){return I})),n.d(e,"parseHTML",(function(){return D})),n.d(e,"ifShow",(function(){return V})),n.d(e,"inRange",(function(){return W})),n.d(e,"numberInterpolate",(function(){return R})),n.d(e,"arrayInterpolate",(function(){return U})),n.d(e,"objectInterpolate",(function(){return q})),n.d(e,"interpolate",(function(){return Z})),n.d(e,"keyframeInterpolate",(function(){return K})),n.d(e,"flex",(function(){return X})),n.d(e,"grid",(function(){return $})),n.d(e,"calcLayout",(function(){return J})),n.d(e,"scale",(function(){return Q})),n.d(e,"add",(function(){return tt})),n.d(e,"sub",(function(){return et})),n.d(e,"min",(function(){return nt})),n.d(e,"max",(function(){return it})),n.d(e,"distance",(function(){return rt})),n.d(e,"normalize",(function(){return ot})),n.d(e,"rotate",(function(){return st})),n.d(e,"vertical",(function(){return at})),n.d(e,"toPrecision",(function(){return lt})),n.d(e,"toThousands",(function(){return ut})),n.d(e,"toScientificNotation",(function(){return ct})),n.d(e,"toKNotation",(function(){return ht})),n.d(e,"ifNegative",(function(){return dt})),n.d(e,"ifPositive",(function(){return pt})),n.d(e,"multi",(function(){return ft})),n.d(e,"mid",(function(){return gt})),n.d(e,"createOffscreenGroup",(function(){return c})),n.d(e,"isInOffscreenGroup",(function(){return h})),n.d(e,"omit",(function(){return mt})),n.d(e,"catmullRom2Bezier",(function(){return yt})),n.d(e,"PRIMILTIVE_ATTRIBUTES",(function(){return vt})),n.d(e,"isPrimitiveAttribute",(function(){return xt})),n.d(e,"getPrimitiveAttributes",(function(){return wt})),n.d(e,"sampling",(function(){return St})),n.d(e,"scaleToPixel",(function(){return kt})),n.d(e,"Selection",(function(){return _t})),n.d(e,"select",(function(){return Gt})),n.d(e,"maybeAppend",(function(){return Ht})),n.d(e,"parseSeriesAttr",(function(){return Ft})),n.d(e,"getShapeSpace",(function(){return It})),n.d(e,"getLocalBBox",(function(){return Dt})),n.d(e,"createTempText",(function(){return Vt})),n.d(e,"isHorizontal",(function(){return Wt})),n.d(e,"isVertical",(function(){return Rt})),n.d(e,"toUppercaseFirstLetter",(function(){return Ut})),n.d(e,"toLowercaseFirstLetter",(function(){return qt})),n.d(e,"addPrefix",(function(){return Zt})),n.d(e,"removePrefix",(function(){return Kt})),n.d(e,"applyStyleSheet",(function(){return Yt})),n.d(e,"subStyleProps",(function(){return Xt})),n.d(e,"superStyleProps",(function(){return $t})),n.d(e,"splitStyle",(function(){return Jt})),n.d(e,"path2marker",(function(){return ee})),n.d(e,"svg2marker",(function(){return ne})),n.d(e,"measureTextWidth",(function(){return oe})),n.d(e,"getFont",(function(){return se})),n.d(e,"throttle",(function(){return ae})),n.d(e,"parseDate",(function(){return ce})),n.d(e,"getMask",(function(){return he})),n.d(e,"formatTime",(function(){return de})),n.d(e,"getTimeDiff",(function(){return pe})),n.d(e,"getTimeScale",(function(){return fe})),n.d(e,"getTimeStart",(function(){return ge})),n.d(e,"timer",(function(){return me})),n.d(e,"getTranslate",(function(){return be})),n.d(e,"percentTransform",(function(){return ye})),n.d(e,"transpose",(function(){return ve})),n.d(e,"traverse",(function(){return o})),n.d(e,"show",(function(){return s})),n.d(e,"hide",(function(){return a})),n.d(e,"visibility",(function(){return l}));var i=n(0),r=function(t){return null==t};function o(t,e){e(t),t.children&&t.children.forEach(t=>{t&&o(t,e)})}function s(t){l(t,!0)}function a(t){l(t,!1)}function l(t,e){const n=e?"visible":"hidden";o(t,t=>{t.attr("visibility",n)})}class u extends i.Group{constructor(){super(...arguments),this.addEventListener(i.ElementEvent.INSERTED,()=>{a(this)})}}function c(t){const e=t.appendChild(new u({class:"offscreen"}));return a(e),e}function h(t){let e=t;for(;e;){if("offscreen"===e.className)return!0;e=e.parent}return!1}function d(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class p extends i.Text{get offscreenGroup(){return this._offscreen||(this._offscreen=c(this)),this._offscreen}disconnectedCallback(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()}constructor(){let{style:t,...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({style:{text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle",...t},...e}),d(this,"_offscreen",void 0)}}function f(t){return t*Math.PI/180}function g(t){return Number((180*t/Math.PI).toPrecision(5))}function m(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class b{get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;m(this,"x",0),m(this,"y",0),m(this,"width",0),m(this,"height",0),this.x=t,this.y=e,this.width=n,this.height=i}static fromRect(t){return new b(t.x,t.y,t.width,t.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}}}function y(t){const{min:[e,n],max:[i,r]}=t.getRenderBounds();return new b(e,n,i-e,r-n)}var v=function(t){return"function"==typeof t};function x(t,e){return v(t)?t(...e):t}const w=(t,e)=>{const n=t=>"".concat(e,"-").concat(t),i=Object.fromEntries(Object.entries(t).map(t=>{let[e,i]=t;const r=n(i);return[e,{name:r,class:".".concat(r),id:"#".concat(r),toString:()=>r}]}));return Object.assign(i,{prefix:n}),i};var S=function(t){return"object"==typeof t&&null!==t},k={}.toString,P=function(t,e){return k.call(t)==="[object "+e+"]"},A=function(t){if(!S(t)||!P(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},L=function(t){return Array.isArray?Array.isArray(t):P(t,"Array")};const M=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;Object.entries(e).forEach(r=>{let[o,s]=r;const a=t;Object.prototype.hasOwnProperty.call(e,o)&&(s?A(s)?(A(t[o])||(a[o]={}),n<i?M(t[o],s,n+1,i):a[o]=e[o]):L(s)?(a[o]=[],a[o]=a[o].concat(s)):a[o]=s:a[o]=s)})},E=function(t){for(let e=0;e<(arguments.length<=1?0:arguments.length-1);e+=1)M(t,e+1<1||arguments.length<=e+1?void 0:arguments[e+1]);return t},C=t=>void 0!==t&&null!=t&&!Number.isNaN(t);function B(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";if("text"===t.nodeName){const i={wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n};t.attr(i)}}function O(t){const{canvas:e,touches:n,offsetX:i,offsetY:r}=t;if(e){const{x:t,y:n}=e;return[t,n]}if(n){const{clientX:t,clientY:e}=n[0];return[t,e]}return i&&r?[i,r]:[0,0]}var j=function(t){return P(t,"String")},N=function(t){return P(t,"Number")};function T(t){return"function"==typeof t?t():j(t)||N(t)?new p({style:{text:String(t)}}):t}function _(t,e,n,i,r,o){return(t===e||Math.min(t,e)<=r&&r<=Math.max(t,e))&&(n===i||Math.min(n,i)<=o&&o<=Math.max(n,i))}function z(t,e,n){const i=t;(!t.length||e<t[0]||e===t[0]&&n<t[1])&&(i[0]=e,i[1]=n)}function G(t,e,n,i){let[r,o]=t,[s,a]=e,[l,u]=n,[c,h]=i;const d=[];if((h-u)*(s-r)==(a-o)*(c-l))(a-o)*(l-r)==(u-o)*(s-r)&&(_(r,s,o,a,l,u)&&z(d,l,u),_(r,s,o,a,c,h)&&z(d,c,h),_(l,c,u,h,r,o)&&z(d,r,o),_(l,c,u,h,s,a)&&z(d,s,a));else{const t=(l*(h-u)+o*(c-l)-u*(c-l)-r*(h-u))/((s-r)*(h-u)-(c-l)*(a-o)),e=(r*(a-o)+u*(s-r)-o*(s-r)-l*(a-o))/((c-l)*(a-o)-(s-r)*(h-u));t>=0&&t<=1&&e>=0&&e<=1&&(d[0]=r+t*(s-r),d[1]=o+t*(a-o))}return d}function H(t,e){let[n,i]=t,[r,o]=e;return((n-r)**2+(i-o)**2)**.5}function F(t,e){return t.reduce((t,n)=>((t[n[e]]=t[n[e]]||[]).push(n),t),{})}function I(t){const e=document.createElement("div");return e.innerHTML=t,e.firstChild}function D(t){return"string"==typeof t?I(t):t}function V(t,e,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t=>{t.node().removeChildren()};return t?n(e):(i&&r(e),null)}function W(t,e,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0;return!!(i&&t===e||r&&t===n)||t>e&&t<n}const R=function(t,e){return function(n){return t*(1-n)+e*n}};function U(t,e){const n=e?e.length:0,i=t?Math.min(n,t.length):0;return function(r){const o=new Array(i),s=new Array(n);let a=0;for(a=0;a<i;++a)o[a]=Z(t[a],e[a]);for(;a<n;++a)s[a]=e[a];for(a=0;a<i;++a)s[a]=o[a](r);return s}}function q(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={},i={};return Object.entries(e).forEach(e=>{let[r,o]=e;r in t?n[r]=Z(t[r],o):i[r]=o}),function(t){return Object.entries(n).forEach(e=>{let[n,r]=e;return i[n]=r(t)}),i}}function Z(t,e){return"number"==typeof t&&"number"==typeof e?R(t,e):Array.isArray(t)&&Array.isArray(e)?U(t,e):"object"==typeof t&&"object"==typeof e?q(t,e):e=>t}function K(t,e,n,i){if(!i)return t.attr("__keyframe_data__",n),null;const{duration:r=0}=i,o=Z(e,n),s=Math.ceil(+r/16),a=new Array(s).fill(0).map((t,e,n)=>({__keyframe_data__:o(e/(n.length-1))}));return t.animate(a,{fill:"both",...i})}function Y(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(let o=0;o<t.length;o++){const{x:s,y:a,width:l,height:u}=t[o],[c,h]=[s+l,a+u];s<e&&(e=s),a<n&&(n=a),c>i&&(i=c),h>r&&(r=h)}return new b(e,n,i-e,r-n)}const X=function(t,e,n){const{width:i,height:r}=t,{flexDirection:o="row",flexWrap:s="nowrap",justifyContent:a="flex-start",alignContent:l="flex-start",alignItems:u="flex-start"}=n,c="row"===o,h="row"===o||"column"===o,d=c?h?[1,0]:[-1,0]:h?[0,1]:[0,-1];let[p,f]=[0,0];const g=e.map(t=>{const{width:e,height:n}=t,[i,r]=[p,f];return[p,f]=[p+e*d[0],f+n*d[1]],new b(i,r,e,n)}),m=Y(g),y={"flex-start":0,"flex-end":c?i-m.width:r-m.height,center:c?(i-m.width)/2:(r-m.height)/2},v=g.map(t=>{const{x:e,y:n}=t,i=b.fromRect(t);return i.x=c?e+y[a]:e,i.y=c?n:n+y[a],i}),x=(Y(v),t=>{const[e,n]=c?["height",r]:["width",i];switch(u){case"flex-start":return 0;case"flex-end":return n-t[e];case"center":return n/2-t[e]/2;default:return 0}});return v.map(t=>{const{x:e,y:n}=t,i=b.fromRect(t);return i.x=c?e:e+x(i),i.y=c?n+x(i):n,i}).map(e=>{var n,i;const r=b.fromRect(e);return r.x+=null!==(n=t.x)&&void 0!==n?n:0,r.y+=null!==(i=t.y)&&void 0!==i?i:0,r})},$=function(t,e,n){return[]};var J=(t,e,n)=>{if(0===e.length)return[];const i={flex:X,grid:$},r=n.display in i?i[n.display]:null;return(null==r?void 0:r.call(null,t,e,n))||[]};function Q(t,e){return[t[0]*e,t[1]*e]}function tt(t,e){return[t[0]+e[0],t[1]+e[1]]}function et(t,e){return[t[0]-e[0],t[1]-e[1]]}function nt(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function it(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function rt(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function ot(t){if(0===t[0]&&0===t[1])return[0,0];const e=Math.sqrt(t[0]**2+t[1]**2);return[t[0]/e,t[1]/e]}function st(t,e,n){const[i,r]=t,[o,s]=e,a=i-o,l=r-s,u=Math.sin(n),c=Math.cos(n);return[a*c-l*u+o,a*u+l*c+s]}function at(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function lt(t,e){const n=10**e;return~~(t*n)/n}function ut(t){return t.toLocaleString()}function ct(t){return t.toExponential()}function ht(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.abs(t)<1e3?String(t):"".concat(lt(t/1e3,e).toLocaleString(),"K")}const dt=(t,e,n)=>t<0&&Number.isFinite(t)?e:n,pt=(t,e,n)=>t>0&&Number.isFinite(t)?e:n,ft=(t,e)=>t*e,gt=(t,e)=>t/2+(e||0)/2;function mt(t,e){const n={},i=Array.isArray(e)?e:[e];for(const e in t)i.includes(e)||(n[e]=t[e]);return n}function bt(t,e,n,i){const r=[],o=!!i;let s,a,l,u,c,h=[1/0,1/0],d=[-1/0,-1/0];if(o){[h,d]=i;for(let e=0,n=t.length;e<n;e+=1){const n=t[e];h=nt(h,n),d=it(d,n)}}for(let i=0,p=t.length;i<p;i+=1){const f=t[i];if(0!==i||n)if(i!==p-1||n){s=t[[i?i-1:p-1,i-1][n?0:1]],a=t[n?(i+1)%p:i+1];let g=[0,0];g=et(a,s),g=Q(g,e);let m=rt(f,s),b=rt(f,a);const y=m+b;0!==y&&(m/=y,b/=y);let v=Q(g,-m),x=Q(g,b);u=tt(f,v),l=tt(f,x),l=nt(l,it(a,f)),l=it(l,nt(a,f)),v=et(l,f),v=Q(v,-m/b),u=tt(f,v),u=nt(u,it(s,f)),u=it(u,nt(s,f)),x=et(f,u),x=Q(x,b/m),l=tt(f,x),o&&(u=it(u,h),u=nt(u,d),l=it(l,h),l=nt(l,d)),r.push(c),r.push(u),c=l}else u=f,r.push(c),r.push(u);else c=f}return n&&r.push(r.shift()),r}function yt(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[[0,0],[1,1]];const i=!!e,r=[];for(let e=0,n=t.length;e<n;e+=2)r.push([t[e],t[e+1]]);const o=bt(r,.4,i,n),s=r.length,a=[];let l,u,c;for(let t=0;t<s-1;t+=1)l=o[2*t],u=o[2*t+1],c=r[t+1],a.push(["C",l[0],l[1],u[0],u[1],c[0],c[1]]);return i&&(l=o[s],u=o[s+1],[c]=r,a.push(["C",l[0],l[1],u[0],u[1],c[0],c[1]])),a}const vt=["$el","anchor","cx","cy","d","defX","defY","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function xt(t){return vt.includes(t)}function wt(t){const e={};for(const n in t)xt(n)&&(e[n]=t[n]);return e}function St(t,e){if(t.length<=e)return t;const n=Math.floor(t.length/e),i=[];for(let e=0;e<t.length;e+=n)i.push(t[e]);return i}function kt(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{width:i,height:r}=t.getBBox(),o=e/Math.max(i,r);return n&&t.scale(o),o}class Pt extends Map{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(At(this,t))}has(t){return super.has(At(this,t))}set(t,e){return super.set(Lt(this,t),e)}delete(t){return super.delete(Mt(this,t))}}Set;function At(t,e){let{_intern:n,_key:i}=t;const r=i(e);return n.has(r)?n.get(r):e}function Lt(t,e){let{_intern:n,_key:i}=t;const r=i(e);return n.has(r)?n.get(r):(n.set(r,e),e)}function Mt(t,e){let{_intern:n,_key:i}=t;const r=i(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}function Et(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Ct(t){return t}function Bt(t,e,n,i){return function t(r,o){if(o>=i.length)return n(r);const s=new Pt,a=i[o++];let l=-1;for(const t of r){const e=a(t,++l,r),n=s.get(e);n?n.push(t):s.set(e,[t])}for(const[e,n]of s)s.set(e,t(n,o));return e(s)}(t,0)}function Ot(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function jt(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var Tt=new WeakSet;class _t{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[null,null,null,null,null],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];Ot(this,Tt),jt(this,"_elements",void 0),jt(this,"_parent",void 0),jt(this,"_data",void 0),jt(this,"_enter",void 0),jt(this,"_exit",void 0),jt(this,"_update",void 0),jt(this,"_merge",void 0),jt(this,"_split",void 0),jt(this,"_document",void 0),jt(this,"_transitions",void 0),jt(this,"_facetElements",void 0),this._elements=Array.from(t),this._data=e,this._parent=n,this._document=i,this._enter=r[0],this._update=r[1],this._exit=r[2],this._merge=r[3],this._split=r[4],this._transitions=o,this._facetElements=s}selectAll(t){const e="string"==typeof t?this._parent.querySelectorAll(t):t;return new _t(e,null,this._elements[0],this._document)}selectFacetAll(t){const e="string"==typeof t?this._parent.querySelectorAll(t):t;return new _t(this._elements,null,this._parent,this._document,void 0,void 0,e)}select(t){const e="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new _t([e],null,e,this._document)}append(t){const e="function"==typeof t?t:()=>this.createElement(t),n=[];if(null!==this._data){for(let t=0;t<this._data.length;t++){const i=this._data[t],[r,o]=Array.isArray(i)?i:[i,null],s=e(r,t);s.__data__=r,null!==o&&(s.__fromElements__=o),this._parent.appendChild(s),n.push(s)}return new _t(n,null,this._parent,this._document)}for(let t=0;t<this._elements.length;t++){const i=this._elements[t],r=e(i.__data__,t);i.appendChild(r),n.push(r)}return new _t(n,null,n[0],this._document)}maybeAppend(t,e){const n=Nt(this,Tt,zt).call(this,"#"===t[0]?t:"#".concat(t),e);return n.attr("id",t),n}maybeAppendByClassName(t,e){const n=t.toString(),i=Nt(this,Tt,zt).call(this,"."===n[0]?n:".".concat(n),e);return i.attr("className",n),i}maybeAppendByName(t,e){const n=Nt(this,Tt,zt).call(this,'[name="'.concat(t,'"]'),e);return n.attr("name",t),n}data(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>null;const i=[],r=[],o=new Set(this._elements),s=[],a=new Set,l=new Map(this._elements.map((t,n)=>[e(t.__data__,n),t])),u=new Map(this._facetElements.map((t,n)=>[e(t.__data__,n),t])),c=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Bt(t,Ct,Ct,n)}(this._elements,t=>n(t.__data__));for(let h=0;h<t.length;h++){const d=t[h],p=e(d,h),f=n(d,h);if(l.has(p)){const t=l.get(p);t.__data__=d,t.__facet__=!1,r.push(t),o.delete(t),l.delete(p)}else if(u.has(p)){const t=u.get(p);t.__data__=d,t.__facet__=!0,r.push(t),u.delete(p)}else if(c.has(p)){const t=c.get(p);s.push([d,t]);for(const e of t)o.delete(e);c.delete(p)}else if(l.has(f)){const t=l.get(f);t.__toData__?t.__toData__.push(d):t.__toData__=[d],a.add(t),o.delete(t)}else i.push(d)}const h=[new _t([],i,this._parent,this._document),new _t(r,null,this._parent,this._document),new _t(o,null,this._parent,this._document),new _t([],s,this._parent,this._document),new _t(a,null,this._parent,this._document)];return new _t(this._elements,null,this._parent,this._document,h)}merge(t){const e=[...this._elements,...t._elements],n=[...this._transitions,...t._transitions];return new _t(e,null,this._parent,this._document,void 0,n)}createElement(t){if(this._document)return this._document.createElement(t,{});const e=_t.registry[t];return e?new e:function(t){throw new Error(t)}("Unknown node type: ".concat(t))}join(){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t=>t.remove(),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t=>t,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t=>t.remove();const r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:t=>t)(this._enter),o=t(this._update),s=e(this._exit),a=n(this._merge),l=i(this._split);return o.merge(r).merge(s).merge(a).merge(l)}remove(){for(let t=0;t<this._elements.length;t++){const e=this._elements[t],n=this._transitions[t];n?n.then(()=>e.remove()):e.remove()}return new _t([],null,this._parent,this._document,void 0,this._transitions)}each(t){for(let e=0;e<this._elements.length;e++){const n=this._elements[e],i=n.__data__;t.call(n,i,e)}return this}attr(t,e){const n="function"!=typeof e?()=>e:e;return this.each((function(i,r){void 0!==e&&(this[t]=n.call(this,i,r))}))}style(t,e){const n="function"==typeof e&&(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])?e:()=>e;return this.each((function(i,r){void 0!==e&&(this.style[t]=n.call(this,i,r))}))}styles(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.each((function(n,i){Object.entries(t).forEach(t=>{let[r,o]=t;const s="function"==typeof o&&e?o:()=>o;void 0!==o&&this.attr(r,s.call(this,n,i))})}))}update(t){const e="function"==typeof t&&(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?t:()=>t;return this.each((function(n,i){t&&this.update&&this.update(e.call(this,n,i))}))}maybeUpdate(t){const e="function"==typeof t&&(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?t:()=>t;return this.each((function(n,i){t&&this.update&&this.update(e.call(this,n,i))}))}transition(t){const{_transitions:e}=this;return this.each((function(n,i){e[i]=t.call(this,n,i)}))}on(t,e){return this.each((function(){this.addEventListener(t,e)})),this}call(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return t.call(this._parent,this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions.filter(t=>!!t)}parent(){return this._parent}}function zt(t,e){const n=this._elements[0],i=n.querySelector(t);if(i)return new _t([i],null,this._parent,this._document);const r="string"==typeof e?this.createElement(e):e();return n.appendChild(r),new _t([r],null,this._parent,this._document)}function Gt(t){return new _t([t],null,t,t.ownerDocument)}function Ht(t,e,n){return t.querySelector(e)?Gt(t).select(e):Gt(t).append(n)}function Ft(t){if(N(t))return[t,t,t,t];if(L(t)){const e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function It(t){const e=t&&t.getRenderBounds();if(!e)return{width:0,height:0};const n=e.getMax(),i=e.getMin();return{width:n[0]-i[0],height:n[1]-i[1]}}function Dt(t){const{min:e,max:n}=t.getLocalBounds(),[[i,r],[o,s]]=[e,n];return{x:i,y:r,width:o-i,height:s-r,left:i,bottom:s,top:r,right:o}}function Vt(t,e){const n=Gt(t).append("text").node();return n.attr({...e,visibility:"hidden"}),n}function Wt(t,e){const[n,i]=t,[r,o]=e;return n!==r&&i===o}function Rt(t,e){const[n,i]=t,[r,o]=e;return n===r&&i!==o}function Ut(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function qt(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function Zt(t,e){return"".concat(e).concat(Ut(t))}function Kt(t,e){var n;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e||(null===(n=t.match(/^([a-z][a-z0-9]+)/))||void 0===n?void 0:n[0])||"",o=t.replace(new RegExp("^(".concat(r,")")),"");return i?qt(o):o}function Yt(t,e){Object.entries(e).forEach(e=>{let[n,i]=e;[t,...t.querySelectorAll(n)].filter(t=>t.matches(n)).forEach(t=>{if(!t)return;t.style.cssText+=Object.entries(i).reduce((t,e)=>"".concat(t).concat(e.join(":"),";"),"")})})}function Xt(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i={};return Object.entries(t).forEach(t=>{let[r,o]=t;if("className"===r||"class"===r);else if(r.startsWith("show")&&Kt(r,"show").startsWith(e)!==n)r===Zt(e,"show")?i[r]=o:i[r.replace(new RegExp(Ut(e)),"")]=o;else if(!r.startsWith("show")&&r.startsWith(e)!==n){const t=Kt(r,e);"filter"===t&&"function"==typeof o||(i[t]=o)}}),i}function $t(t,e){return Object.entries(t).reduce((t,n)=>{let[i,r]=n;return i.startsWith("show")?t["show".concat(e).concat(i.slice(4))]=r:t["".concat(e).concat(Ut(i))]=r,t},{})}function Jt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["x","y","class","className"];const n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],i={},r={};return Object.entries(t).forEach(t=>{let[o,s]=t;e.includes(o)||(-1!==n.indexOf(o)?r[o]=s:i[o]=s)}),[i,r]}jt(_t,"registry",{g:i.Group,rect:i.Rect,circle:i.Circle,path:i.Path,text:p,ellipse:i.Ellipse,image:i.Image,line:i.Line,polygon:i.Polygon,polyline:i.Polyline,html:i.HTML});var Qt=n(2),te=n.n(Qt);function ee(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1014;return(i,r,o)=>te()(t).map(t=>{const s=[];s.push(!0===t.relative?t.code.toLowerCase():t.code.toUpperCase());return[[t.x1,t.y1],[t.x2,t.y2],[t.x,t.y]].forEach(a=>{const[l,u]=a;void 0!==l&&s.push(!0===t.relative?l/e*2*o:i-o+2*o*(l/e)),void 0!==u&&s.push(!0===t.relative?u/n*2*o:r-o+2*o*(u/n))}),s})}function ne(t){const e=/<path\s+d="(.*?)"/i.exec(t),n=/viewBox="\d+\s+\d+\s+(\d+)\s+(\d+)"/i.exec(t);if(null===e||e.length<2)return()=>[];let i=1024,r=1024;return null!==n&&n.length>=3&&(Number.isNaN(parseInt(n[1],10))||(i=parseInt(n[1],10)),Number.isNaN(parseInt(n[2],10))||(r=parseInt(n[2],10))),ee(e[1],i,r)}var ie=function(t,e){if(!v(t))throw new TypeError("Expected a function");var n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var a=t.apply(this,i);return s.set(o,a),a};return n.cache=new Map,n};let re;const oe=ie((t,e)=>{const n=j(t)?t:t.style.text.toString(),{fontSize:i,fontFamily:r,fontWeight:o,fontStyle:s,fontVariant:a}=e||se(t);return re||(re=document.createElement("canvas").getContext("2d")),re.font=[s,a,o,"".concat(i,"px"),r].join(" "),re.measureText(n).width},(t,e)=>[j(t)?t:t.style.text.toString(),Object.values(e||se(t)).join()].join("")),se=t=>{const e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",i=t.style.fontStyle||"normal",r=t.style.fontVariant;let o=t.style.fontSize;return o="object"==typeof o?o.value:o,{fontSize:o,fontFamily:e,fontWeight:n,fontStyle:i,fontVariant:r}};function ae(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(n,i,r)=>{const o=r.value;let s;"function"==typeof o&&(r.value=function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];if(s)return;const a=this;e&&o.apply(a,i),s=window.setTimeout(()=>{o.apply(a,i),s=null},t)})}}const le=["year","month","day","hour","minute","second"],ue=["YYYY","MM","DD","hh","mm","ss"];function ce(t){return t instanceof Date?t:new Date(t)}function he(t){let[e,n]=t;const i=le.indexOf(e),r=le.indexOf(n);let o="";for(let t=i;t<=r;t+=1)if(o+=ue[t],t<r){let e="-";2===t?e=" ":t>2&&(e=":"),o+=e}return o}function de(t,e){const n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),hh:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()};let i=e;return Object.keys(n).forEach(t=>{const e=n[t];i=i.replace(t,"YYYY"===t?"".concat(e):"0".concat(e).slice(-2))}),i}function pe(t,e){return ce(t).getTime()-ce(e).getTime()}function fe(t,e){const[n,i]=[ce(t),ce(e)];return n.getFullYear()!==i.getFullYear()?"year":n.getMonth()!==i.getMonth()?"month":n.getDay()!==i.getDay()?"day":n.getHours()!==i.getHours()?"hour":n.getMinutes()!==i.getMinutes()?"minute":"second"}function ge(t,e){const n=new Date(t);return{year:t=>{t.setMonth(0),t.setHours(0,0,0,0)},month:t=>{t.setDate(1),t.setHours(0,0,0,0)},day:t=>t.setHours(0,0,0,0),hour:t=>t.setMinutes(0,0,0),minute:t=>t.setSeconds(0,0),second:t=>t.setMilliseconds(0)}[e](n),de(n,he(["year",e]))}function me(t){const e=localStorage.getItem("__debug__");return(n,i,r)=>{const o="[".concat(i,"] ").concat(t),s=r.value;"function"==typeof s&&(r.value=function(){e&&console.time(o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];s.apply(this,n),e&&console.timeEnd(o)})}}function be(t,e,n){const{width:i,height:r}=t.getBBox(),[o,s]=[e,n].map((t,e)=>{var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?i:r):t});return[o,s]}function ye(t,e){if(e)try{const n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,i=e.replace(n,(e,n,i)=>"translate(".concat(be(t,n,i),")"));t.attr("transform",i)}catch(t){}}function ve(t){var e;return(null===(e=t[0])||void 0===e?void 0:e.map((e,n)=>t.map(t=>t[n])))||[]}function xe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function we(){l(this,"hidden"!==this.attributes.visibility)}class Se extends i.CustomElement{get offscreenGroup(){return this._offscreen||(this._offscreen=c(this)),this._offscreen}get defaultOptions(){return this._defaultOptions}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(E({},{style:e},t)),xe(this,"_defaultOptions",void 0),xe(this,"_offscreen",void 0),xe(this,"initialized",!1),this._defaultOptions=e}connectedCallback(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0}disconnectedCallback(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()}attributeChangedCallback(t){"visibility"===t&&we.call(this)}update(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return this.attr(E({},this.attributes,e)),null===(t=this.render)||void 0===t?void 0:t.call(this,this.attributes,this,n)}clear(){this.removeChildren()}bindEvents(t,e){}}const ke=(t,e,n)=>[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]],Pe=ke,Ae=(t,e,n)=>[["M",t,e+n],["L",t,e-n]],Le=(t,e,n)=>[["M",t-n,e],["L",t+n,e]],Me=Le;var Ee,Ce,Be,Oe=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};function je(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ne(t){const e=function(t){let e="default";if(Oe(t)&&t instanceof Image)e="image";else if(v(t))e="symbol";else if(j(t)){const n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}(t);return["base64","url","image"].includes(e)?"image":t&&"symbol"===e?"path":null}class Te extends Se{render(t,e){const{symbol:n,size:i=16,...r}=t,o=Ne(n);V(!!o,Gt(e),t=>{t.maybeAppendByClassName("marker",o).attr("className","marker ".concat(o,"-marker")).call(t=>{if("image"===o){const e=2*i;t.styles({img:n,width:e,height:e,x:-i,y:-i})}else{const e=i/2,o=v(n)?n:Te.getSymbol(n);t.styles({path:null==o?void 0:o(0,0,e),...r})}})})}}je(Te,"MARKER_SYMBOL_MAP",new Map),je(Te,"registerSymbol",(t,e)=>{Te.MARKER_SYMBOL_MAP.set(t,e)}),je(Te,"getSymbol",t=>Te.MARKER_SYMBOL_MAP.get(t)),Te.registerSymbol("cross",(t,e,n)=>[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]),Te.registerSymbol("hyphen",(t,e,n)=>[["M",t-n,e],["L",t+n,e]]),Te.registerSymbol("line",Ae),Te.registerSymbol("plus",(t,e,n)=>[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]),Te.registerSymbol("tick",(t,e,n)=>[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]),Te.registerSymbol("circle",ke),Te.registerSymbol("point",Pe),Te.registerSymbol("bowtie",(t,e,n)=>{const i=n-1.5;return[["M",t-n,e-i],["L",t+n,e+i],["L",t+n,e-i],["L",t-n,e+i],["Z"]]}),Te.registerSymbol("hexagon",(t,e,n)=>{const i=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+i,e-n/2],["L",t+i,e+n/2],["L",t,e+n],["L",t-i,e+n/2],["L",t-i,e-n/2],["Z"]]}),Te.registerSymbol("square",(t,e,n)=>[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]),Te.registerSymbol("diamond",(t,e,n)=>[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]),Te.registerSymbol("triangle",(t,e,n)=>{const i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+i],["L",t,e-i],["L",t+n,e+i],["Z"]]}),Te.registerSymbol("triangle-down",(t,e,n)=>{const i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+i],["Z"]]}),Te.registerSymbol("line",Ae),Te.registerSymbol("dot",Le),Te.registerSymbol("dash",Me),Te.registerSymbol("smooth",(t,e,n)=>[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]),Te.registerSymbol("hv",(t,e,n)=>[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]),Te.registerSymbol("vh",(t,e,n)=>[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]),Te.registerSymbol("hvh",(t,e,n)=>[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]),Te.registerSymbol("vhv",(function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}));class _e extends Se{constructor(t){super(t,{padding:4,spacing:4})}render(t,e){const{padding:n=0,marker:i,text:o,radius:s,spacing:a,align:l,verticalAlign:u}=t,c=Xt(t,"label"),h=Xt(t,"background"),[d,f,g,m]=Ft(n),b=Ht(e,".tag-content","g").attr("className","tag-content").style("zIndex",0).node(),y=i?{marker:i}:{symbol:"triangle",size:0},v=Ht(b,".tag-marker",()=>new Te({style:y})).attr("className","tag-marker").call(t=>{t.node().clear()}).update(y).node(),{x:x,y:w}=function(t,e){const n=t.getLocalBounds();return{x:n.halfExtents[0]?n.max[0]+(e||0):t.style.x,y:n.halfExtents[1]?(n.min[1]+n.max[1])/2:t.style.y}}(v,a);Gt(b).maybeAppendByClassName("tag-text",()=>new p).styles({fontSize:12,text:r(o)?"":"".concat(o),x:x,y:w,...c,textBaseline:"middle"}).call(t=>{o||t.remove()}),function(t,e,n,i,r){const o=t.getLocalBounds();let s=0,a=0;"start"===i&&(s=e),"center"===i&&(s=-o.halfExtents[0]),"end"===i&&(s=-e-2*o.halfExtents[0]),"top"===r&&(a=n+o.halfExtents[1]),"middle"===r&&(a=0),"bottom"===r&&(a=n-2*o.halfExtents[1]),t.setLocalPosition([s,a])}(b,m,d,l||"start",u||"top");const S=b.getLocalBounds();Gt(e).maybeAppendByClassName("tag-background","rect").styles({zIndex:-1,y:S.min[1]-d,x:S.min[0]-m,width:null!==h?m+f+2*S.halfExtents[0]:0,height:null!==h?d+g+2*S.halfExtents[1]:0,radius:null!=s?s:2,fill:"#fafafa",stroke:"#d9d9d9",lineWidth:1,...h})}}Ee=_e,Be="tag",(Ce=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(Ce="tag"))in Ee?Object.defineProperty(Ee,Ce,{value:Be,enumerable:!0,configurable:!0,writable:!0}):Ee[Ce]=Be;var ze=function(t){return void 0===t};function Ge(t,e,n,i){for(var r in n=n||0,i=i||5,e)if(e.hasOwnProperty(r)){var o=e[r];null!==o&&A(o)?(A(t[r])||(t[r]={}),n<i?Ge(t[r],o,n+1,i):t[r]=e[r]):L(o)?(t[r]=[],t[r]=t[r].concat(o)):void 0!==o&&(t[r]=o)}}var He=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)Ge(t,e[i]);return t};const Fe={small:{textFontSize:10,buttonWidth:40,buttonHeight:20,markerSize:8},middle:{textFontSize:12,buttonWidth:60,buttonHeight:30,markerSize:12},large:{textFontSize:16,buttonWidth:80,buttonHeight:40,markerSize:16}},Ie={primary:{default:{textFill:"#fff",buttonFill:"#1890ff",buttonLineWidth:0,markerFill:"#1890ff"},active:{buttonFill:"#40a9ff",markerFill:"#40a9ff"},disabled:{}},dashed:{default:{buttonFill:"transparent",buttonStroke:"#bbb",buttonLineDash:[5,5]},active:{},disabled:{}},link:{default:{textFill:"#1890ff",buttonFill:"transparent",buttonLineWidth:0,markerFill:"#1890ff"},active:{},disabled:{}},text:{default:{textFill:"#000",buttonFill:"transparent",buttonLineWidth:0,markerFill:"#000"},active:{},disabled:{}},default:{default:{textFill:"#000",buttonFill:"transparent",buttonStroke:"#bbb",markerFill:"#bbb"},active:{textFill:"#1890ff",buttonStroke:"#1890ff",markerStroke:"#1890ff"},disabled:{}}},De={strict:{textFill:"#b8b8b8"},buttonStroke:"#d9d9d9",buttonFill:"#f5f5f5",markerStroke:"#d9d9d9"};function Ve(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class We extends Se{get markerSize(){const{markerSymbol:t}=this.attributes,e=this.getStyle("marker");return t?(null==e?void 0:e.size)||2:0}get textAvailableWidth(){const{markerSymbol:t,padding:e,ellipsis:n,width:i,markerSpacing:r}=this.attributes;if(!n)return 1/0;const o=ze(i)?this.getStyle("button").width:i;return t?o-2*e-r-this.markerSize:o-2*e}get buttonHeight(){const{height:t}=this.attributes;return t?+t:+this.getStyle("button").height}constructor(t){super(t,{cursor:"pointer",padding:10,size:"middle",type:"default",text:"",state:"default",markerAlign:"left",markerSpacing:5,default:{buttonLineWidth:1,buttonRadius:5},active:{}}),Ve(this,"textShape",void 0),Ve(this,"state","default"),Ve(this,"clickEvents",()=>{const{onClick:t,state:e}=this.attributes;"disabled"!==e&&(null==t||t.call(this,this))}),Ve(this,"mouseenterEvent",()=>{const{state:t}=this.attributes;"disabled"!==t&&(this.state="active",this.render(this.attributes,this))}),Ve(this,"mouseleaveEvent",()=>{const{state:t}=this.attributes;this.state=t,this.render(this.attributes,this)})}getStyle(t){const{size:e,type:n}=this.attributes,{state:i}=this,r=He({},Fe[e],Ie[n][i],this.attributes.default,this.attributes[i]);return"disabled"===i&&(Object.keys(r).forEach(t=>{t in De&&(r[t]=De[t])}),Object.keys(De.strict).forEach(t=>{r[t]=De.strict[t]}),He(r,this.attributes.disabled||{})),Xt(r,t)}render(t,e){const{text:n="",padding:i=0,markerSymbol:r,markerSpacing:o=0}=t;e.attr("cursor","disabled"===this.state?"not-allowed":"pointer");const[s,a,l,u]=Ft(i),c=this.buttonHeight,h=this.getStyle("marker"),{markerSize:d}=this,p={...h,symbol:r,x:u+d/2,y:c/2,size:d},f=Ht(e,".marker",()=>new Te({className:"marker",style:p})).update({style:p}).node().getLocalBounds(),g=this.getStyle("text");this.textShape=Ht(e,".text","text").attr("className","text").styles({x:d?f.max[0]+o:u,y:c/2,...g,text:n,textAlign:"left",textBaseline:"middle",wordWrap:!0,wordWrapWidth:this.textAvailableWidth,maxLines:1,textOverflow:"..."}).node();const m=this.textShape.getLocalBounds(),b=this.getStyle("button");Gt(e).maybeAppendByClassName(".background","rect").styles({zIndex:-1,...b,height:c,width:u+(d?d+o:0)+2*m.halfExtents[0]+a})}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attr(He({},this.attributes,t));const{state:e}=this.attributes;this.state=e,this.render(this.attributes,this)}setState(t){this.update({state:t})}hide(){this.style.visibility="hidden"}show(){this.style.visibility="visible"}bindEvents(){this.addEventListener("click",this.clickEvents),this.addEventListener("mouseenter",this.mouseenterEvent),this.addEventListener("mouseleave",this.mouseleaveEvent)}}Ve(We,"tag","button");var Re=function(t,e){if(t)if(L(t))for(var n=0,i=t.length;n<i&&!1!==e(t[n],n);n++);else if(Oe(t))for(var r in t)if(t.hasOwnProperty(r)&&!1===e(t[r],r))break},Ue=Object.prototype.hasOwnProperty,qe=function(t,e){if(null===t||!A(t))return{};var n={};return Re(e,(function(e){Ue.call(t,e)&&(n[e]=t[e])})),n};function Ze(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Ke extends Se{constructor(t){super(He({},Ke.defaultOptions,t))}render(t,e){const{x:n,y:i,items:o,textStyle:s,padding:a=0,width:l,separator:u}=t,[c,h,d]=Ft(a),f=Xt(t,"tag"),g=Ht(e,".container","g").styles({className:"container",x:n+d,y:i+c});let m=0,b=0;g.node().removeChildren();for(let t=0;t<o.length;t++){const e=o[t],n=new _e({className:"breadcrumb-item",style:{x:m,y:b,...f,text:r(e.text)?e.id:e.text,...qe(e,["marker"]),padding:0}});g.append(()=>n);const i=n.getLocalBounds(),s=2*i.halfExtents[0],a=2*i.halfExtents[1];if(m+=s,!r(l)){m>l-h&&(n.attr({x:0,y:b+a}),m=s,b+=a)}this.bindInnerEvents(n,e);const{spacing:c=0,text:d="/",style:y}=u||{};if(t!==o.length-1){const e=new p({className:"".concat(Ke.tag,"-separator"),id:"".concat(Ke.tag,"-separator-").concat(t),style:{x:m+c,y:b+a/2,...y,text:d,textAlign:"end",textBaseline:"middle"}});g.append(()=>e);m+=2*e.getLocalBounds().halfExtents[0]+c}}}update(t){this.attr(He({},this.attributes,t)),this.render(this.attributes,this)}bindInnerEvents(t,e){const{items:n,onClick:i}=this.attributes;i&&t.addEventListener("click",()=>{i.call(t,e.id,e,n)})}}function Ye(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.reduce((t,e)=>n=>t(e(n)),t)}function Xe(t,e){return e-t?n=>(n-t)/(e-t):t=>.5}function $e(t,e,n,i,r){let o=n||0,s=i||t.length;const a=r||(t=>t);for(;o<s;){const n=Math.floor((o+s)/2);a(t[n])>e?s=n:o=n+1}return o}Ze(Ke,"tag","breadcrumb"),Ze(Ke,"defaultOptions",{style:{separator:{text:"/",style:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},spacing:8},textStyle:{default:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},active:{fill:"#5468ff",cursor:"pointer"}},padding:[8,8,8,8]}});const Je=Math.sqrt(50),Qe=Math.sqrt(10),tn=Math.sqrt(2);function en(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/10**r;return r>=0?(o>=Je?10:o>=Qe?5:o>=tn?2:1)*10**r:-(10**-r)/(o>=Je?10:o>=Qe?5:o>=tn?2:1)}const nn=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const i=[t,e];let r,o=0,s=i.length-1,a=i[o],l=i[s];return l<a&&([a,l]=[l,a],[o,s]=[s,o]),r=en(a,l,n),r>0?(a=Math.floor(a/r)*r,l=Math.ceil(l/r)*r,r=en(a,l,n)):r<0&&(a=Math.ceil(a*r)/r,l=Math.floor(l*r)/r,r=en(a,l,n)),r>0?(i[o]=Math.floor(a/r)*r,i[s]=Math.ceil(l/r)*r):r<0&&(i[o]=Math.ceil(a*r)/r,i[s]=Math.floor(l*r)/r),i};function rn(t,e,n,i){const r=(t,r)=>{r&&((t,e)=>{const r=t=>i(t)%e==0;let o=e;for(;o&&!r(t);)n(t,-1),o-=1})(t,r),e(t)},o=(t,e)=>{const i=new Date(+t-1);return r(i,e),n(i,e),r(i),i};return{ceil:o,floor:(t,e)=>{const n=new Date(+t);return r(n,e),n},range:(t,e,i,s)=>{const a=[],l=Math.floor(i);for(let u=s?o(t,i):o(t);+u<+e;n(u,l),r(u))a.push(new Date(+u));return a},duration:t}}rn(1,t=>t,(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+e)}),t=>t.getTime()),rn(1e3,t=>{t.setMilliseconds(0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+1e3*e)}),t=>t.getSeconds()),rn(6e4,t=>{t.setSeconds(0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+6e4*e)}),t=>t.getMinutes()),rn(36e5,t=>{t.setMinutes(0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+36e5*e)}),t=>t.getHours()),rn(864e5,t=>{t.setHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+864e5*e)}),t=>t.getDate()-1);const on=rn(2592e6,t=>{t.setDate(1),t.setHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=t.getMonth();t.setMonth(n+e)}),t=>t.getMonth()),sn=(rn(6048e5,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+6048e5*e)}),t=>{const e=on.floor(t),n=new Date(+t);return Math.floor((+n-+e)/6048e5)}),rn(31536e6,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=t.getFullYear();t.setFullYear(n+e)}),t=>t.getFullYear()),rn(1,t=>t,(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+e)}),t=>t.getTime()),rn(1e3,t=>{t.setUTCMilliseconds(0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+1e3*e)}),t=>t.getUTCSeconds()),rn(6e4,t=>{t.setUTCSeconds(0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+6e4*e)}),t=>t.getUTCMinutes()),rn(36e5,t=>{t.setUTCMinutes(0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+36e5*e)}),t=>t.getUTCHours()),rn(864e5,t=>{t.setUTCHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+864e5*e)}),t=>t.getUTCDate()-1),rn(2592e6,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=t.getUTCMonth();t.setUTCMonth(n+e)}),t=>t.getUTCMonth()));rn(6048e5,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.setTime(+t+6048e5*e)}),t=>{const e=sn.floor(t),n=new Date(+t);return Math.floor((+n-+e)/6048e5)}),rn(31536e6,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=t.getUTCFullYear();t.setUTCFullYear(n+e)}),t=>t.getUTCFullYear());var an={}.toString,ln=function(t,e){return an.call(t)==="[object "+e+"]"},un=function(t){return ln(t,"Function")},cn=function(t){return Array.isArray?Array.isArray(t):ln(t,"Array")},hn=function(t){var e=typeof t;return null!==t&&"object"===e||"function"===e};var dn=function(t,e){if(t)if(cn(t))for(var n=0,i=t.length;n<i&&!1!==e(t[n],n);n++);else if(hn(t))for(var r in t)if(t.hasOwnProperty(r)&&!1===e(t[r],r))break};Object.keys;var pn=function(t){return"object"==typeof t&&null!==t},fn=function(t){if(!pn(t)||!ln(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var gn=Array.prototype,mn=(gn.splice,gn.indexOf,Array.prototype.splice,function(t){return ln(t,"String")});Object.prototype.hasOwnProperty;var bn=function(t){return ln(t,"Number")};Number.isInteger&&Number.isInteger;Math.PI,parseInt,Math.PI;var yn=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return dn(t,(function(n,i){un(t)&&"prototype"===i||e.push(n)})),e};var vn=function(t){return null===t},xn=(Object.prototype,function(t){return void 0===t});function wn(t,e,n,i){for(var r in n=n||0,i=i||5,e)if(e.hasOwnProperty(r)){var o=e[r];null!==o&&fn(o)?(fn(t[r])||(t[r]={}),n<i?wn(t[r],o,n+1,i):t[r]=e[r]):cn(o)?(t[r]=[],t[r]=t[r].concat(o)):void 0!==o&&(t[r]=o)}}var Sn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)wn(t,e[i]);return t};Object.prototype.hasOwnProperty;Object.prototype.hasOwnProperty;var kn=function(t){return t};Object.create;var Pn;Object.create;(function(t,e){if(!un(t))throw new TypeError("Expected a function");var n=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=e?e.apply(this,i):i[0],s=n.cache;if(s.has(o))return s.get(o);var a=t.apply(this,i);return s.set(o,a),a};n.cache=new Map})((function(t,e){void 0===e&&(e={});var n=e.fontSize,i=e.fontFamily,r=e.fontWeight,o=e.fontStyle,s=e.fontVariant;return Pn||(Pn=document.createElement("canvas").getContext("2d")),Pn.font=[o,s,r,n+"px",i].join(" "),Pn.measureText(mn(t)?t:"").width}),(function(t,e){return void 0===e&&(e={}),function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}([t],yn(e)).join("")})),function(){function t(){this.map={}}t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var n=this.map[t];return void 0===n?e:n},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length}}();function An(t){return!xn(t)&&!vn(t)&&!Number.isNaN(t)}function Ln(t,e){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[t]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t))},n.prototype.initRange=function(){const{interpolator:e}=this.options;this.options.range=t(e)},n.prototype.composeOutput=function(t,n){const{domain:i,interpolator:r,round:o}=this.getOptions(),s=e(i.map(t)),a=o?(t=>e=>{const n=t(e);return bn(n)?Math.round(n):n})(r):r;this.output=Ye(a,s,n,t)},n.prototype.invert=void 0}}var Mn=n(3),En=n.n(Mn);function Cn(t,e,n){let i=n;return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function Bn(t){const e=En.a.get(t);if(!e)return null;const{model:n,value:i}=e;return"rgb"===n?i:"hsl"===n?function(t){const e=t[0]/360,n=t[1]/100,i=t[2]/100,r=t[3];if(0===n)return[255*i,255*i,255*i,r];const o=i<.5?i*(1+n):i+n-i*n,s=2*i-o;return[255*Cn(s,o,e+1/3),255*Cn(s,o,e),255*Cn(s,o,e-1/3),r]}(i):null}const On=(t,e)=>n=>t*(1-n)+e*n,jn=(t,e)=>"number"==typeof t&&"number"==typeof e?On(t,e):"string"==typeof t&&"string"==typeof e?((t,e)=>{const n=Bn(t),i=Bn(e);return null===n||null===i?n?()=>t:()=>e:t=>{const e=new Array(4);for(let r=0;r<4;r+=1){const o=n[r],s=i[r];e[r]=o*(1-t)+s*t}const[r,o,s,a]=e;return"rgba(".concat(Math.round(r),", ").concat(Math.round(o),", ").concat(Math.round(s),", ").concat(a,")")}})(t,e):()=>t,Nn=(t,e)=>{const n=On(t,e);return t=>Math.round(n(t))};function Tn(t,e){let{map:n,initKey:i}=t;const r=i(e);return n.has(r)?n.get(r):e}function _n(t){return"object"==typeof t?t.valueOf():t}class zn extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=_n,null!==t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Tn({map:this.map,initKey:this.initKey},t))}has(t){return super.has(Tn({map:this.map,initKey:this.initKey},t))}set(t,e){return super.set(function(t,e){let{map:n,initKey:i}=t;const r=i(e);return n.has(r)?n.get(r):(n.set(r,e),e)}({map:this.map,initKey:this.initKey},t),e)}delete(t){return super.delete(function(t,e){let{map:n,initKey:i}=t;const r=i(e);return n.has(r)&&(e=n.get(r),n.delete(r)),e}({map:this.map,initKey:this.initKey},t))}}class Gn{constructor(t){this.options=Sn({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=Sn({},this.options,t),this.rescale(t)}rescale(t){}}const Hn=Symbol("defaultUnknown");function Fn(t,e,n){for(let i=0;i<e.length;i+=1)t.has(e[i])||t.set(n(e[i]),i)}function In(t){const{value:e,from:n,to:i,mapper:r,notFoundReturn:o}=t;let s=r.get(e);if(void 0===s){if(o!==Hn)return o;s=n.push(e)-1,r.set(e,s)}return i[s%i.length]}function Dn(t){return t instanceof Date?t=>"".concat(t):"object"==typeof t?t=>JSON.stringify(t):t=>t}class Vn extends Gn{getDefaultOptions(){return{domain:[],range:[],unknown:Hn}}constructor(t){super(t)}map(t){return 0===this.domainIndexMap.size&&Fn(this.domainIndexMap,this.getDomain(),this.domainKey),In({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&Fn(this.rangeIndexMap,this.getRange(),this.rangeKey),In({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=Dn(e),this.rangeKey=Dn(n),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new Vn(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:e}=this.options;return this.sortedDomain=e?[...t].sort(e):t,this.sortedDomain}}function Wn(t){return Math.round(1e12*t)/1e12}function Rn(t){const{domain:e,range:n,paddingOuter:i,paddingInner:r,flex:o,round:s,align:a}=t,l=e.length,u=function(t,e){const n=e-t.length;return n>0?[...t,...new Array(n).fill(1)]:n<0?t.slice(0,e):t}(o,l),[c,h]=n,d=h-c,p=d/(2/l*i+1-1/l*r),f=p*r/l,g=p-l*f,m=function(t){const e=Math.min(...t);return t.map(t=>t/e)}(u),b=g/m.reduce((t,e)=>t+e),y=new zn(e.map((t,e)=>{const n=m[e]*b;return[t,s?Math.floor(n):n]})),v=new zn(e.map((t,e)=>{const n=m[e]*b+f;return[t,s?Math.floor(n):n]})),x=Array.from(v.values()).reduce((t,e)=>t+e),w=c+(d-(x-x/l*r))*a;let S=s?Math.round(w):w;const k=new Array(l);for(let t=0;t<l;t+=1){k[t]=Wn(S);const n=e[t];S+=v.get(n)}return{valueBandWidth:y,valueStep:v,adjustedRange:k}}class Un extends Vn{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Hn,flex:[]}}constructor(t){super(t)}clone(){return new Un(this.options)}getStep(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:e}=this.options;return t>0?t:e}getPaddingOuter(){const{padding:t,paddingOuter:e}=this.options;return t>0?t:e}rescale(){super.rescale();const{align:t,domain:e,range:n,round:i,flex:r}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:a}=function(t){var e;const{domain:n}=t,i=n.length;if(0===i)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(null===(e=t.flex)||void 0===e?void 0:e.length))return Rn(t);const{range:r,paddingOuter:o,paddingInner:s,round:a,align:l}=t;let u,c,h=r[0];const d=r[1]-h,p=2*o,f=i-s;u=d/Math.max(1,p+f),a&&(u=Math.floor(u)),h+=(d-u*(i-s))*l,c=u*(1-s),a&&(h=Math.round(h),c=Math.round(c));const g=new Array(i).fill(0).map((t,e)=>h+e*u);return{valueStep:u,valueBandWidth:c,adjustedRange:g}}({align:t,range:n,round:i,flex:r,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=a,this.valueBandWidth=s,this.adjustedRange=o}}const qn=(t,e,n)=>{let i,r,o=t,s=e;if(o===s&&n>0)return[o];let a=en(o,s,n);if(0===a||!Number.isFinite(a))return[];if(a>0){o=Math.ceil(o/a),s=Math.floor(s/a),r=new Array(i=Math.ceil(s-o+1));for(let t=0;t<i;t+=1)r[t]=(o+t)*a}else{a=-a,o=Math.ceil(o*a),s=Math.floor(s*a),r=new Array(i=Math.ceil(s-o+1));for(let t=0;t<i;t+=1)r[t]=(o+t)/a}return r};Number.EPSILON;const Zn=(t,e,n)=>{const[i,r]=t,[o,s]=e;let a,l;return i<r?(a=Xe(i,r),l=n(o,s)):(a=Xe(r,i),l=n(s,o)),Ye(l,a)},Kn=(t,e,n)=>{const i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),s=t[0]>t[i],a=s?[...t].reverse():t,l=s?[...e].reverse():e;for(let t=0;t<i;t+=1)r[t]=Xe(a[t],a[t+1]),o[t]=n(l[t],l[t+1]);return e=>{const n=$e(t,e,1,i)-1,s=r[n];return Ye(o[n],s)(e)}},Yn=(t,e,n,i)=>(Math.min(t.length,e.length)>2?Kn:Zn)(t,e,i?Nn:n);class Xn extends Gn{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:On,tickCount:5}}map(t){return An(t)?this.output(t):this.options.unknown}invert(t){return An(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,e,n,...i)}getTicks(){const{tickMethod:t}=this.options,[e,n,i,...r]=this.getTickMethodOptions();return t(e,n,i,...r)}getTickMethodOptions(){const{domain:t,tickCount:e}=this.options;return[t[0],t[t.length-1],e]}chooseNice(){return nn}rescale(){this.nice();const[t,e]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,e,this.chooseClamp(e))}chooseClamp(t){const{clamp:e,range:n}=this.options,i=this.options.domain.map(t),r=Math.min(i.length,n.length);return e?function(t,e){const n=e<t?e:t,i=t>e?t:e;return t=>Math.min(Math.max(n,t),i)}(i[0],i[r-1]):kn}composeOutput(t,e){const{domain:n,range:i,round:r,interpolate:o}=this.options,s=Yn(n.map(t),i,o,r);this.output=Ye(s,e,t)}composeInput(t,e,n){const{domain:i,range:r}=this.options,o=Yn(r,i.map(t),On);this.input=Ye(e,n,o)}}class $n extends Xn{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:jn,tickMethod:qn,tickCount:5}}chooseTransforms(){return[kn,kn]}clone(){return new $n(this.options)}}var Jn="[^\\s]+";function Qn(t,e){for(var n=[],i=0,r=t.length;i<r;i++)n.push(t[i].substr(0,e));return n}var ti=function(t){return function(e,n){var i=n[t].map((function(t){return t.toLowerCase()})).indexOf(e.toLowerCase());return i>-1?i:null}};function ei(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0,r=e;i<r.length;i++){var o=r[i];for(var s in o)t[s]=o[s]}return t}var ni=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ii=["January","February","March","April","May","June","July","August","September","October","November","December"],ri=Qn(ii,3),oi={dayNamesShort:Qn(ni,3),dayNames:ni,monthNamesShort:ri,monthNames:ii,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},si=(ei({},oi),function(t){return+t-1}),ai=[null,"\\d\\d?"],li=[null,Jn],ui=["isPm",Jn,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],ci=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?n:-n}return 0}];ti("monthNamesShort"),ti("monthNames");var hi,di=function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let pi=hi=class extends $n{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:kn,tickMethod:qn,tickCount:5}}constructor(t){super(t)}clone(){return new hi(this.options)}};pi=hi=di([Ln((function(t){return[t(0),t(1)]}),t=>{const[e,n]=t;return Ye(On(0,1),Xe(e,n))})],pi);var fi,gi=function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s};let mi=fi=class extends $n{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:kn,tickMethod:qn,tickCount:5}}constructor(t){super(t)}clone(){return new fi(this.options)}};mi=fi=gi([Ln((function(t){return[t(0),t(.5),t(1)]}),t=>{const[e,n,i]=t,r=Ye(On(0,.5),Xe(e,n)),o=Ye(On(.5,1),Xe(n,i));return t=>e>i?t<n?o(t):r(t):t<n?r(t):o(t)})],mi);var bi=function(t){if("object"!=typeof t||null===t)return t;var e;if(L(t)){e=[];for(var n=0,i=t.length;n<i;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=bi(t[n]):e[n]=t[n]}else for(var r in e={},t)"object"==typeof t[r]&&null!=t[r]?e[r]=bi(t[r]):e[r]=t[r];return e},yi=bi;function vi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class xi extends i.DisplayObject{constructor(t){let{style:e,...n}=t;super(He({},{type:"column"},{style:e,...n})),vi(this,"columnsGroup",void 0),this.columnsGroup=new i.Group({name:"columns"}),this.appendChild(this.columnsGroup),this.render()}render(){const{columns:t}=this.attributes;Gt(this.columnsGroup).selectAll(".column").data(t.flat()).join(t=>t.append("rect").attr("className","column").each((function(t){this.attr(t)})),t=>t.each((function(t){this.attr(t)})),t=>t.remove())}update(t){this.attr(E({},this.attributes,t)),this.render()}clear(){this.removeChildren()}}function wi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Si extends i.DisplayObject{constructor(t){let{style:e,...n}=t;super(He({},{type:"lines"},{style:e,...n})),wi(this,"linesGroup",this.appendChild(new i.Group)),wi(this,"areasGroup",this.appendChild(new i.Group)),this.render()}render(){const{lines:t,areas:e}=this.attributes;t&&this.renderLines(t),e&&this.renderAreas(e)}clear(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()}update(t){this.attr(E({},this.attributes,t)),this.render()}renderLines(t){Gt(this.linesGroup).selectAll(".line").data(t).join(t=>t.append("path").attr("className","line").each((function(t){this.attr(t)})),t=>t.each((function(t){this.attr(t)})),t=>t.remove())}renderAreas(t){Gt(this.linesGroup).selectAll(".area").data(t).join(t=>t.append("path").attr("className","area").each((function(t){this.attr(t)})),t=>t.each((function(t){this.style(t)})),t=>t.remove())}}var ki=function(t,e,n){return t<e?e:t>n?n:t},Pi=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},Ai=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(j(t)||j(e))return!1;if(Pi(t)||Pi(e)){if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length&&(n=Ai(t[i],e[i]));i++);return n}if(S(t)||S(e)){var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(n=!0,i=0;i<r.length&&(n=Ai(t[r[i]],e[r[i]]));i++);return n}return!1},Li=Ai;function Mi(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e?t.length-1:0,i=t.map((t,e)=>[e===n?"M":"L",...t]);return e?i.reverse():i}function Ei(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.length<=2)return Mi(t);const n=[],i=t.length;for(let r=0;r<i;r+=1){const o=e?t[i-r-1]:t[r];Li(o,n.slice(-2))||n.push(...o)}const r=yt(n,!1);return e?r.unshift(["M",...t[i-1]]):r.unshift(["M",...t[0]]),r}function Ci(t,e,n){const i=yi(t);return i.push(["L",e,n],["L",0,n],["Z"]),i}var Bi=function(t){if(L(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},Oi=function(t,e){if(L(t)){for(var n,i=1/0,r=0;r<t.length;r++){var o=t[r],s=v(e)?e(o):o[e];s<i&&(n=o,i=s)}return n}},ji=function(t){if(L(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},Ni=function(t,e){if(L(t)){for(var n,i=-1/0,r=0;r<t.length;r++){var o=t[r],s=v(e)?e(o):o[e];s>i&&(n=o,i=s)}return n}};function Ti(t){return 0===t.length?[0,0]:[Bi(Oi(t,t=>Bi(t)||0)),ji(Ni(t,t=>ji(t)||0))]}function _i(t){const e=yi(t),n=e[0].length,[i,r]=[Array(n).fill(0),Array(n).fill(0)];for(let t=0;t<e.length;t+=1){const o=e[t];for(let t=0;t<n;t+=1)o[t]>=0?(o[t]+=i[t],i[t]=o[t]):(o[t]+=r[t],r[t]=o[t])}return e}function zi(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Gi extends Se{get rawData(){const{data:t}=this.attributes;if(!t||0===(null==t?void 0:t.length))return[[]];const e=yi(t);return N(e[0])?[e]:e}get data(){return this.attributes.isStack?_i(this.rawData):this.rawData}get scales(){return this.createScales(this.data)}get baseline(){const{y:t}=this.scales,[e,n]=t.getOptions().domain||[0,0];return n<0?t.map(n):t.map(e<0?0:e)}get containerShape(){const{width:t,height:e}=this.attributes;return{width:t,height:e}}get linesStyle(){const{type:t,isStack:e,smooth:n}=this.attributes;if("line"!==t)throw new Error("linesStyle can only be used in line type");const i=Xt(this.attributes,"area"),r=Xt(this.attributes,"line"),{width:o}=this.containerShape,{data:s}=this;if(0===s[0].length)return{lines:[],areas:[]};const{x:a,y:l}=this.scales,u=function(t,e){const{x:n,y:i}=e;let[r,o]=i.getOptions().range||[0,0];return o>r&&([o,r]=[r,o]),t.map(t=>t.map((t,e)=>[n.map(e),ki(i.map(t),o,r)]))}(s,{type:"line",x:a,y:l});let c=[];if(i){const{baseline:t}=this;c=e?n?function(t,e,n){const i=[];for(let r=t.length-1;r>=0;r-=1){const o=t[r],s=Ei(o);let a;if(0===r)a=Ci(s,e,n);else{const e=Ei(t[r-1],!0),n=o[0];e[0][0]="L",a=[...s,...e,["M",...n],["Z"]]}i.push(a)}return i}(u,o,t):function(t,e,n){const i=[];for(let r=t.length-1;r>=0;r-=1){const o=Mi(t[r]);let s;if(0===r)s=Ci(o,e,n);else{const e=Mi(t[r-1],!0);e[0][0]="L",s=[...o,...e,["Z"]]}i.push(s)}return i}(u,o,t):function(t,e,n,i){return t.map(t=>Ci(e?Ei(t):Mi(t),n,i))}(u,n,o,t)}return{lines:u.map((t,e)=>({stroke:this.getColor(e),path:n?Ei(t):Mi(t),...r})),areas:c.map((t,e)=>({path:t,fill:this.getColor(e),...i}))}}get columnsStyle(){const t=Xt(this.attributes,"column"),{isStack:e,type:n}=this.attributes;if("column"!==n)throw new Error("columnsStyle can only be used in column type");const{height:i}=this.containerShape;let{rawData:r}=this;if(!r)return{columns:[]};e&&(r=_i(r));const{x:o,y:s}=this.createScales(r),[a,l]=Ti(r),u=new $n({domain:[0,l-(a>0?0:a)],range:[0,i]}),c=o.getBandWidth(),{rawData:h}=this;return{columns:r.map((n,i)=>n.map((n,a)=>{const l=c/r.length;return{fill:this.getColor(i),...t,...e?{x:o.map(a),y:s.map(n),width:c,height:u.map(h[i][a])}:{x:o.map(a)+l*i,y:n>=0?s.map(n):s.map(0),width:l,height:u.map(Math.abs(n))}}}))}}constructor(t){super(t,{type:"line",width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff"}),zi(this,"container",void 0),zi(this,"spark",void 0)}render(t,e){this.container=Ht(e,".container","rect").attr("className","container").node();const{type:n}=t,i="spark".concat(n),r="line"===n?this.linesStyle:this.columnsStyle;this.spark=Ht(e,".".concat(i),()=>"line"===n?new Si({className:i,style:r}):new xi({className:i,style:r})).styles(r).node()}getColor(t){const{color:e}=this.attributes;return L(e)?e[t%e.length]:v(e)?e.call(null,t):e}createScales(t){var e,n;const{type:i,range:r=[],isGroup:o,spacing:s}=this.attributes,{width:a,height:l}=this.containerShape,[u,c]=Ti(t),h=new $n({domain:[null!==(e=r[0])&&void 0!==e?e:u,null!==(n=r[1])&&void 0!==n?n:c],range:[l,0]});return"line"===i?{type:i,x:new $n({domain:[0,t[0].length-1],range:[0,a]}),y:h}:{type:i,x:new Un({domain:t[0].map((t,e)=>e),range:[0,a],paddingInner:o?s:0}),y:h}}}function Hi(t){if(!t)return{enter:!1,update:!1,exit:!1};const e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(t=>{let[n]=t;return!e.includes(n)}));return Object.fromEntries(e.map(e=>function(t){return"boolean"!=typeof t&&("enter"in t&&"update"in t&&"exit"in t)}(t)?!1===t[e]?[e,!1]:[e,{...t[e],...n}]:[e,n]))}function Fi(t,e){t?t.finished.then(e):e()}function Ii(t,e){"update"in t?t.update(e):t.attr(e)}function Di(t,e,n){if(0===e.length)return null;if(!n){return Ii(t,{style:e.slice(-1)[0]}),null}return t.animate(e,n)}function Vi(t,e,n){const i={},o={};return Object.entries(e).forEach(e=>{let[n,s]=e;if(!r(s)){const e=t.style[n]||t.parsedStyle[n]||0;e!==s&&(i[n]=e,o[n]=s)}}),n?Di(t,[i,o],{fill:"both",...n}):(Ii(t,o),null)}zi(Gi,"tag","sparkline");var Wi=function(t,e){return t.style.opacity||(t.style.opacity=1),Vi(t,{opacity:0},e)};const Ri={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},Ui={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},qi={orientation:"horizontal",showLabel:!0,type:"start"},Zi=w({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track"},"slider");function Ki(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Yi=w({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle");class Xi extends Se{render(t,e){const{size:n=10,radius:i=n/4,orientation:r,...o}=t,s=n,a=2.4*s,l=Gt(e).maybeAppendByClassName(Yi.iconRect,"rect").styles({...o,width:s,height:a,radius:i,x:-s/2,y:-a/2}),u=1/3*s,c=2/3*s,h=1/4*a,d=3/4*a;l.maybeAppendByClassName("".concat(Yi.iconLine,"-1"),"line").styles({x1:u,x2:u,y1:h,y2:d,...o}),l.maybeAppendByClassName("".concat(Yi.iconLine,"-2"),"line").styles({x1:c,x2:c,y1:h,y2:d,...o}),l.node().setOrigin(s/2,a/2),"vertical"===r?e.setLocalEulerAngles(90):e.setLocalEulerAngles(0)}}class $i extends Se{constructor(t){super(t,qi),Ki(this,"label",void 0),Ki(this,"icon",void 0)}renderLabel(t){const{showLabel:e}=this.attributes,n=Xt(this.attributes,"label"),[i,r]=Jt(n,[]);V(!!e,Gt(t).maybeAppendByClassName(Yi.labelGroup,"g").styles(r),t=>{this.label=t.maybeAppendByClassName(Yi.label,"text").styles({...Ui,...i}),this.label.on("mousedown",t=>{t.stopPropagation()}),this.label.on("touchstart",t=>{t.stopPropagation()})})}renderIcon(t){const{orientation:e}=this.attributes,n={orientation:e,...Ri,...Xt(this.attributes,"icon")},{iconShape:i=(()=>new Xi({style:n}))}=this.attributes;Gt(t).maybeAppendByClassName(Yi.iconGroup,"g").selectAll(Yi.icon.class).data([i]).join(t=>t.append(i).attr("className",Yi.icon.name),t=>t.update(n),t=>t.remove())}render(t,e){this.renderIcon(e),this.renderLabel(e)}}function Ji(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Qi extends Se{get values(){return this.attributes.values}set values(t){this.attributes.values=this.clampValues(t)}get sparklineStyle(){const{orientation:t}=this.attributes;if("horizontal"!==t)return null;const e=Xt(this.attributes,"sparkline");return{zIndex:0,...this.availableSpace,...e}}get shape(){const{trackLength:t,trackSize:e}=this.attributes,[n,i]=this.getOrientVal([[t,e],[e,t]]);return{width:n,height:i}}get availableSpace(){const{padding:t}=this.attributes,[e,n,i,r]=Ft(t),{width:o,height:s}=this.shape;return{x:r,y:e,width:o-(r+n),height:s-(e+i)}}constructor(t){super(t,{animate:{duration:100,fill:"both"},brushable:!0,formatter:t=>t.toString(),handleSpacing:2,orientation:"horizontal",padding:0,scrollable:!0,selectionCursor:"move",selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],...$t(qi,"handle"),...$t(Ri,"handleIcon"),...$t(Ui,"handleLabel")}),Ji(this,"range",[0,1]),Ji(this,"trackShape",void 0),Ji(this,"foregroundGroup",void 0),Ji(this,"selectionShape",void 0),Ji(this,"startHandle",void 0),Ji(this,"endHandle",void 0),Ji(this,"selectionStartPos",void 0),Ji(this,"selectionWidth",void 0),Ji(this,"prevPos",void 0),Ji(this,"target",void 0),Ji(this,"onDragStart",t=>e=>{e.stopPropagation(),this.target=t,this.prevPos=this.getOrientVal(O(e));const{x:n,y:i}=this.availableSpace,{x:r,y:o}=this.attributes;this.selectionStartPos=this.getRatio(this.prevPos-this.getOrientVal([n,i])-this.getOrientVal([+r,+o])),this.selectionWidth=0,document.addEventListener("mousemove",this.onDragging),document.addEventListener("touchmove",this.onDragging),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchend",this.onDragEnd)}),Ji(this,"onDragging",t=>{const{slidable:e,brushable:n}=this.attributes;t.stopPropagation();const i=this.getOrientVal(O(t)),r=i-this.prevPos;if(!r)return;const o=this.getRatio(r);switch(this.target){case"start":e&&this.setValuesOffset(o);break;case"end":e&&this.setValuesOffset(0,o);break;case"selection":e&&this.setValuesOffset(o,o);break;case"track":if(!n)return;this.selectionWidth+=o,this.innerSetValues([this.selectionStartPos,this.selectionStartPos+this.selectionWidth].sort(),!0)}this.prevPos=i}),Ji(this,"onDragEnd",()=>{document.removeEventListener("mousemove",this.onDragging),document.removeEventListener("mousemove",this.onDragging),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd)}),Ji(this,"onValueChange",t=>{const e=new i.CustomEvent("valuechange",{detail:{oldValue:t,value:this.getValues()}});this.dispatchEvent(e)}),this.selectionStartPos=0,this.selectionWidth=0,this.prevPos=0,this.target=""}getValues(){return this.values}setValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.attributes.values=t;const n=!1!==e&&this.attributes.animate;Vi(this.selectionShape.node(),this.selectionStyle,n),this.updateHandlesPosition(n)}updateHandlesPosition(t){this.attributes.showHandle&&(Vi(this.startHandle,this.getHandleStyle("start"),t),Vi(this.endHandle,this.getHandleStyle("end"),t))}innerSetValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.values,i=this.clampValues(t);this.attr("values",i),this.setValues(i),e&&this.onValueChange(n)}renderTrack(t){const{brushable:e}=this.attributes,n=Xt(this.attributes,"track");this.trackShape=Gt(t).maybeAppendByClassName(Zi.track,"rect").styles({cursor:e?"crosshair":"default",...this.shape,...n})}renderSparkline(t){const{orientation:e}=this.attributes;V("horizontal"===e,Gt(t).maybeAppendByClassName(Zi.sparklineGroup,"g"),t=>{const e=this.sparklineStyle;t.maybeAppendByClassName(Zi.sparkline,()=>new Gi({style:e})).update(e)})}get selectionStyle(){return{...Xt(this.attributes,"selection"),...this.calcMask()}}renderHandles(){var t;const{showHandle:e}=this.attributes,n=(e?["start","end"]:[]).map(t=>({type:t})),i=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll(Zi.handle.class).data(n,t=>t.type).join(t=>t.append(t=>{let{type:e}=t;return new $i({style:this.getHandleStyle(e)})}).each((function(t){let{type:e}=t;this.attr("class","".concat(Zi.handle.name," ").concat(e,"-handle"));const n="".concat(e,"Handle");i[n]=this,this.addEventListener("pointerdown",t=>{i.onDragStart(e)(t)})})),t=>t.each((function(t){let{type:e}=t;this.update(i.getHandleStyle(e))})),t=>t.each(t=>{let{type:e}=t;const n="".concat(e,"Handle");i[n]=void 0}).remove())}renderSelection(t){this.foregroundGroup=Gt(t).maybeAppendByClassName(Zi.foreground,"g"),this.selectionShape=this.foregroundGroup.maybeAppendByClassName(Zi.selection,"rect").styles(this.selectionStyle),this.renderHandles()}render(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderSelection(e)}clampValues(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const[n,i]=this.range,[r,o]=this.getValues().map(t=>lt(t,e));let[s,a]=(t||[r,o]).map(t=>lt(t,e));s>a&&([s,a]=[a,s]);const l=a-s;return l>i-n?[n,i]:s<n?r===n&&o===a?[n,a]:[n,l+n]:a>i?o===i&&r===s?[s,i]:[i-l,i]:[s,a]}calcMask(t){const[e,n]=this.clampValues(t),{x:i,y:r,width:o,height:s}=this.availableSpace;return this.getOrientVal([{y:r,height:s,x:e*o+i,width:(n-e)*o},{x:i,width:o,y:e*s+r,height:(n-e)*s}])}calcHandlePosition(t){const{x:e,y:n,width:i,height:r}=this.availableSpace,[o,s]=this.clampValues(),a=("start"===t?o:s)*this.getOrientVal([i,r]);return{x:e+this.getOrientVal([a,i/2]),y:n+this.getOrientVal([r/2,a])}}calcHandleText(t){const{orientation:e,formatter:n}=this.attributes,i=Xt(this.attributes,"handle"),r=Xt(i,"label"),{spacing:o}=i,s=this.getHandleSize(),a=this.clampValues(),{width:l,height:u}=this.availableSpace,{x:c,y:h,width:d,height:f}=this.calcMask(),g=n("start"===t?a[0]:a[1]),m=new p({style:{...r,text:g}}),{width:b,height:y}=m.getBBox();m.destroy();let v=0,x=0;if("horizontal"===e){const e=o+s,n=e+b/2;if("start"===t){v=c-e-b>0?-n:n}else{v=l-c-d-e>b?n:-n}}else{const e=o+s;x="start"===t?h-s>y?-e:e:u-h-f-s>y?e:-e}return{x:v,y:x,text:g}}getHandleLabelStyle(t){const{showLabel:e}=this.attributes;if(!e)return{};return{...Xt(this.attributes,"handleLabel"),...this.calcHandleText(t)}}getHandleIconStyle(){const{handleIconShape:t}=this.attributes,e=Xt(this.attributes,"handleIcon");return{cursor:this.getOrientVal(["ew-resize","ns-resize"]),shape:t,size:this.getHandleSize(),...e}}getHandleStyle(t){const{showLabel:e,orientation:n}=this.attributes,i=this.calcHandlePosition(t),r=this.calcHandleText(t);return{...$t(this.getHandleIconStyle(),"icon"),...$t({...this.getHandleLabelStyle(t),...r},"label"),...i,orientation:n,showLabel:e,type:t,zIndex:3}}getHandleSize(){const{handleIconSize:t,width:e,height:n}=this.attributes;return t||Math.floor((this.getOrientVal([+n,+e])+4)/2.4)}getOrientVal(t){let[e,n]=t;const{orientation:i}=this.attributes;return"horizontal"===i?e:n}setValuesOffset(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[i,r]=this.getValues(),o=[i+t,r+e].sort();n?this.setValues(o):this.innerSetValues(o,!0)}getRatio(t){const{width:e,height:n}=this.availableSpace;return t/this.getOrientVal([e,n])}dispatchCustomEvent(t,e,n){t.on(e,t=>{t.stopPropagation(),this.dispatchEvent(new i.CustomEvent(n,{detail:t}))})}bindEvents(){const t=this.selectionShape;this.addEventListener("wheel",this.onScroll),t.on("mousedown",this.onDragStart("selection")),t.on("touchstart",this.onDragStart("selection")),this.dispatchCustomEvent(t,"mouseenter","selectionMouseenter"),this.dispatchCustomEvent(t,"mouseleave","selectionMouseleave"),this.dispatchCustomEvent(t,"click","selectionClick");const e=this.trackShape;this.dispatchCustomEvent(e,"click","trackClick"),this.dispatchCustomEvent(e,"mouseenter","trackMouseenter"),this.dispatchCustomEvent(e,"mouseleave","trackMouseleave"),e.on("mousedown",this.onDragStart("track")),e.on("touchstart",this.onDragStart("track"))}onScroll(t){const{scrollable:e}=this.attributes;if(e){const{deltaX:e,deltaY:n}=t,i=n||e,r=this.getRatio(i);this.setValuesOffset(r,r,!0)}}}function tr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ji(Qi,"tag","slider");class er extends Se{get padding(){const{padding:t}=this.attributes;return Ft(t)}constructor(t){super(t,{isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0}),tr(this,"slider",void 0),tr(this,"range",[0,1]),tr(this,"onValueChange",t=>{const{value:e}=this.attributes;if(t===e)return;const n={detail:{oldValue:t,value:e}};this.dispatchEvent(new i.CustomEvent("scroll",n)),this.dispatchEvent(new i.CustomEvent("valuechange",n))}),tr(this,"onTrackClick",t=>{const{slidable:e}=this.attributes;if(!e)return;const[n,i]=this.getLocalPosition(),[r,,,o]=this.padding,s=this.getOrientVal([n+o,i+r]),a=(this.getOrientVal(O(t))-s)/this.trackLength;this.setValue(a,!0)}),tr(this,"onThumbMouseenter",t=>{this.dispatchEvent(new i.CustomEvent("thumbMouseenter",{detail:t.detail}))}),tr(this,"onTrackMouseenter",t=>{this.dispatchEvent(new i.CustomEvent("trackMouseenter",{detail:t.detail}))}),tr(this,"onThumbMouseleave",t=>{this.dispatchEvent(new i.CustomEvent("thumbMouseleave",{detail:t.detail}))}),tr(this,"onTrackMouseleave",t=>{this.dispatchEvent(new i.CustomEvent("trackMouseleave",{detail:t.detail}))})}get value(){const{value:t}=this.attributes,[e,n]=this.range;return ki(t,e,n)}get trackLength(){const{viewportLength:t,trackLength:e=t}=this.attributes;return e}get availableSpace(){const{trackSize:t}=this.attributes,e=this.trackLength,[n,i,r,o]=this.padding,[s,a]=this.getOrientVal([[e,t],[t,e]]);return{x:o,y:n,width:+s-(o+i),height:+a-(n+r)}}get trackRadius(){const{isRound:t,trackSize:e}=this.attributes;return t?e/2:0}get thumbRadius(){const{isRound:t,thumbRadius:e}=this.attributes;if(!t)return 0;const{width:n,height:i}=this.availableSpace;return e||this.getOrientVal([i,n])/2}getValues(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value;const{viewportLength:e,contentLength:n}=this.attributes,i=e/n,[r,o]=this.range,s=t*(o-r-i);return[s,s+i]}getValue(){return this.value}renderSlider(t){const{orientation:e,trackSize:n,padding:i,slidable:r}=this.attributes,o=Xt(this.attributes,"track"),s=Xt(this.attributes,"thumb"),a={brushable:!1,orientation:e,padding:i,selectionRadius:this.thumbRadius,showHandle:!1,slidable:r,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:n,values:this.getValues(),...$t(o,"track"),...$t(s,"selection")};this.slider=Gt(t).maybeAppendByClassName("scrollbar",()=>new Qi({style:a})).update(a).node()}render(t,e){this.renderSlider(e)}setValue(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{value:n}=this.attributes,[i,r]=this.range;this.slider.setValues(this.getValues(ki(t,i,r)),e),this.onValueChange(n)}bindEvents(){this.slider.addEventListener("trackClick",t=>{t.stopPropagation(),this.onTrackClick(t.detail)}),this.onHover()}getOrientVal(t){const{orientation:e}=this.attributes;return"horizontal"===e?t[0]:t[1]}onHover(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)}}tr(er,"tag","scrollbar");const nr={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:()=>new i.Path({style:{path:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],anchor:"0.5 0.5",fill:"black",transformOrigin:"center"}}),labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",tickStrokeOpacity:.65,labelOverlap:[]},ir=(He({},nr,{style:{type:"arc"}}),He({},nr,{style:{}}),w({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis")),rr=w({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function or(t){return t.reduce((t,e,n)=>(t.push([0===n?"M":"L",...e]),t),[])}function sr(t,e,n){return"surround"===e.type?function(t,e,n){const{connect:i="line",center:r}=e;if("line"===i)return or(t);if(!r)return[];const o=rt(t[0],r),s=n?0:1;return t.reduce((t,e,n)=>(0===n?t.push(["M",...e]):t.push(["A",o,o,0,0,s,...e]),t),[])}(t,e,n):or(t)}function ar(t,e,n){const{type:i,connect:r,center:o,closed:s}=n,a=s?[["Z"]]:[],[l,u]=[sr(t,n),sr(e.slice().reverse(),n,!0)],[c,h]=[t[0],e.slice(-1)[0]],d=(t,e)=>[l,t,u,e,a].flat();if("line"===r||"surround"===i)return d([["L",...h]],[["L",...c]]);if(!o)throw new Error("Arc grid need to specified center");const[p,f]=[rt(h,o),rt(c,o)];return d([["A",p,p,0,0,1,...h],["L",...h]],[["A",f,f,0,0,0,...c],["L",...c]])}class lr extends Se{render(t,e){const{type:n,center:i,areaFill:r,closed:o,...s}=t,a=function(t){const{data:e=[],closed:n}=t;return n?e.map(t=>{const{points:e}=t,[n]=e;return{...t,points:[...e,n]}}):e}(t),l=Gt(e).maybeAppendByClassName(rr.lineGroup,"g"),u=Gt(e).maybeAppendByClassName(rr.regionGroup,"g");return[...function(t,e,n,i){const{animate:r}=n,o=e.map((t,e)=>({id:t.id||"grid-line-".concat(e),path:sr(t.points,n)}));return t.selectAll(rr.line.class).data(o,t=>t.id).join(t=>t.append("path").each((function(t,e){const n=x(wt({path:t.path,...i}),[t,e,o]);this.attr({class:rr.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],...n})})),t=>t.each((function(t,e){Vi(this,x(wt({path:t.path,...i}),[t,e,o]),r.update)})),t=>t.transition((function(){const t=Wi(this,r.exit);return Fi(t,()=>this.remove()),t}))).transitions()}(l,a,t,s),...function(t,e,n){const{animate:i,connect:r,areaFill:o}=n;if(e.length<2||!o||!r)return[];const s=Array.isArray(o)?o:[o,"transparent"],a=t=>s[t%s.length],l=[];for(let t=0;t<e.length-1;t++){const[i,r]=[e[t].points,e[t+1].points],o=ar(i,r,n);l.push({path:o,fill:a(t)})}return t.selectAll(rr.region.class).data(l,(t,e)=>e).join(t=>t.append("path").each((function(t,e){const n=x(t,[t,e,l]);this.attr(n)})).attr("className",rr.region.name),t=>t.transition((function(t,e){return Vi(this,x(t,[t,e,l]),i.update)})),t=>t.transition((function(){const t=Wi(this,i.exit);return Fi(t,()=>this.remove()),t}))).transitions()}(u,a,t)]}}var ur=function(t,e,n){for(var i=0,r=j(e)?e.split("."):e;t&&i<r.length;)t=t[r[i++]];return void 0===t||i<r.length?n:t};function cr(t,e){return Object.fromEntries(Object.entries(t).map(t=>{let[n,i]=t;return[n,x(i,e)]}))}function hr(t,e){return e&&v(e)?t.filter(e):t}const dr=ie((t,e)=>{const{startAngle:n,endAngle:i}=e;return(i-n)*t+n},(t,e)=>[t,e.startAngle,e.endAngle].join()),pr=ie((t,e)=>{if("linear"===e.type){const{startPos:[t,n],endPos:[i,r]}=e,[o,s]=[i-t,r-n];return ot([o,s])}const n=f(dr(t,e));return[-Math.sin(n),Math.cos(n)]},(t,e)=>{const n=function(t){if("linear"===t.type){const{startPos:e,endPos:n}=t;return[...e,...n]}const{startAngle:e,endAngle:n,center:i,radius:r}=t;return[e,n,...i,r]}(e);return"arc"===e.type&&n.push(t),n.join()});function fr(t,e,n){return at(pr(t,n),"positive"!==e)}const gr=ie((t,e)=>{const{startPos:[n,i],endPos:[r,o]}=e,[s,a]=[r-n,o-i];return[n+s*t,i+a*t]},(t,e)=>[t,...e.startPos,...e.endPos].join()),mr=ie((t,e)=>{const{radius:n,center:[i,r]}=e,o=f(dr(t,e));return[i+n*Math.cos(o),r+n*Math.sin(o)]},(t,e)=>{const{startAngle:n,endAngle:i,radius:r,center:o}=e;return[t,n,i,r,...o].join()});function br(t,e){return"linear"===e.type?gr(t,e):mr(t,e)}function yr(t,e){return e-t==360}function vr(t,e,n,i,r){const o=e-t,[s,a]=[r,r],[l,u]=[f(t),f(e)],c=t=>[n+r*Math.cos(t),i+r*Math.sin(t)],[h,d]=c(l),[p,g]=c(u);if(yr(t,e)){const t=(u+l)/2,[e,n]=c(t);return[["M",h,d],["A",s,a,0,1,0,e,n],["A",s,a,0,1,0,p,g]]}const m=o>180?1:0,b=t>e?0:1;return"M".concat(h,",").concat(d,",A").concat(s,",").concat(a,",0,").concat(m,",").concat(b,",").concat(p,",").concat(g)}function xr(t){const[[e,n],[i,r]]=t;return{x1:e,y1:n,x2:i,y2:r}}function wr(t,e,n,i){const{showTrunc:r,startPos:o,endPos:s,truncRange:a,lineExtension:l}=e,[[u,c],[h,d]]=[o,s],[p,f,g,m]=l?function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];const[[i,r],[o,s],[a,l]]=[t,e,n],[u,c]=[o-i,s-r],h=Math.sqrt(u**2+c**2),[d,p]=[-a/h,l/h];return[d*u,d*c,p*u,p*c]}(o,s,l):new Array(4).fill(0),b=e=>t.selectAll(ir.line.class).data(e,(t,e)=>e).join(t=>t.append("line").attr("className",t=>"".concat(ir.line.name," ").concat(t.className)).styles(n).transition((function(t){return Vi(this,xr(t.line),!1)})),t=>t.styles(n).transition((function(t){let{line:e}=t;return Vi(this,xr(e),i.update)})),t=>t.remove()).transitions();if(!r||!a)return b([{line:[[u+p,c+f],[h+g,d+m]],className:ir.line.name}]);const[y,v]=a,x=h-u,w=d-c,[S,k]=[u+x*y,c+w*y],[P,A]=[u+x*v,c+w*v],L=b([{line:[[u+p,c+f],[S,k]],className:ir.lineFirst.name},{line:[[P,A],[h+g,d+m]],className:ir.lineSecond.name}]);return function(t,e){let{truncRange:n,truncShape:i,lineExtension:r}=e}(0,e),L}function Sr(t,e,n){const{type:i}=e;let r;const o=Xt(e,"line");return r="linear"===i?wr(t,e,mt(o,"arrow"),n):function(t,e,n,i){const{startAngle:r,endAngle:o,center:s,radius:a}=e;return t.selectAll(ir.line.class).data([{path:vr(r,o,...s,a)}],(t,e)=>e).join(t=>t.append("path").attr("className",ir.line.name).styles(e).styles({path:t=>t.path}),t=>t.transition((function(){const t=K(this,function(t){const{startAngle:e,endAngle:n,center:i,radius:r}=t.attributes;return[e,n,...i,r]}(this),[r,o,...s,a],i.update);if(t){const e=()=>{const t=ur(this.attributes,"__keyframe_data__");this.style.path=vr(...t)};t.onframe=e,t.onfinish=e}return t})).styles(e),t=>t.remove()).styles(n).transitions()}(t,e,mt(o,"arrow"),n),function(t,e,n,i){const{showArrow:r,showTrunc:o,lineArrow:s,lineArrowOffset:a,lineArrowSize:l}=n;let u;if(u="arc"===e?t.select(ir.line.class):o?t.select(ir.lineSecond.class):t.select(ir.line.class),!r||!s||"arc"===n.type&&yr(n.startAngle,n.endAngle)){const t=u.node();return void(t&&(t.style.markerEnd=void 0))}const c=T(s);c.attr(i),kt(c,l,!0),u.style("markerEnd",c).style("markerEndOffset",-a)}(t,i,e,o),r}function kr(t){const{type:e,gridCenter:n}=t;return"linear"===e?n:n||t.center}function Pr(t,e){const{gridLength:n}=e;return t.map((t,i)=>{let{value:r}=t;const[o,s]=br(r,e),[a,l]=Q(function(t,e){return fr(t,e.gridDirection,e)}(r,e),n);return{id:i,points:[[o,s],[o+a,s+l]]}})}function Ar(t,e,n,i){const r=Xt(n,"grid"),{type:o,areaFill:s}=r,a=kr(n),l=hr(e,n.gridFilter),u="segment"===o?Pr(l,n):function(t,e){const n=e.gridControlAngles,i=kr(e);if(!i)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||0===n.length)throw new Error("Invalid gridControlAngles");const[r,o]=i;return t.map((t,i)=>{let{value:s}=t;const[a,l]=br(s,e),[u,c]=[a-r,l-o],h=[];return n.forEach(t=>{const e=f(t),[n,i]=[Math.cos(e),Math.sin(e)],s=u*n-c*i+r,a=u*i+c*n+o;h.push([s,a])}),{points:h,id:i}})}(l,n),c={...r,center:a,areaFill:v(s)?l.map((t,e)=>x(s,[t,e,l])):s,animate:i,data:u};return t.selectAll(ir.grid.class).data([1]).join(t=>t.append(()=>new lr({style:c})).attr("className",ir.grid.name),t=>t.transition((function(){return this.update(c)})),t=>t.remove()).transitions()}function Lr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Mr{constructor(t){Lr(this,"x1",void 0),Lr(this,"y1",void 0),Lr(this,"x2",void 0),Lr(this,"y2",void 0);const{left:e,top:n,right:i,bottom:r}=t||{};this.x1=null!=e?e:+Number.MAX_VALUE,this.x2=null!=i?i:-Number.MAX_VALUE,this.y1=null!=n?n:+Number.MAX_VALUE,this.y2=null!=r?r:-Number.MAX_VALUE}get left(){return this.x1}get top(){return this.y1}get right(){return this.x2}get bottom(){return this.y2}get width(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0}get height(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0}clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this}empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE}add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this}rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])}rotatedPoints(t,e,n){const{x1:i,y1:r,x2:o,y2:s}=this,a=Math.cos(t),l=Math.sin(t),u=e-e*a+n*l,c=n-e*l-n*a;return[[a*i-l*r+u,l*i+a*r+c],[a*i-l*s+u,l*i+a*s+c],[a*o-l*s+u,l*o+a*s+c],[a*o-l*r+u,l*o+a*r+c]].flat(1)}set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this}intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)}defined(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE}}function Er(t,e){const[n,i,r,o]=t,[s,a,l,u]=e,c=r-n,h=o-i,d=l-s,p=u-a,f=c*p-d*h;if(0===f)return!1;const g=f>0,m=n-s,b=i-a,y=c*b-h*m;if(y<0===g)return!1;const v=d*b-p*m;return v<0!==g&&(y>f!==g&&v>f!==g)}function Cr(t,e){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some(t=>Er(e,t))}function Br(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0];const n=t.getEulerAngles()||0;t.setEulerAngles(0);const{min:[i,r],max:[o,s]}=t.getLocalBounds(),{width:a,height:l}=t.getBBox();let u=l,c=0,h=0,d=i,p=r;if("text"===t.tagName){u-=1.5;const e=t.style.textAlign,n=t.style.textBaseline;c=+t.style.dx,h=+t.style.dy,"center"===e?d=(i+o)/2:"right"!==e&&"end"!==e||(d=o),"middle"===n?p=(r+s)/2:"bottom"!==n&&"baseline"!==n||(p=s)}const[g=0,m=0,b=g,y=m]=e,v=new Mr;return v.set((c+=i)-y,(h+=r)-g,c+a+m,h+u+b),t.setEulerAngles(n),v.rotatedPoints(f(n),d,p)}function Or(t,e){let n;return[...t.reduce((t,i,r)=>r&&n&&function(t,e,n){const i=Br(t,n),r=Br(e,n);return Cr(r,[i[0],i[1],i[2],i[3]])||Cr(r,[i[0],i[1],i[4],i[5]])||Cr(r,[i[4],i[5],i[6],i[7]])||Cr(r,[i[2],i[3],i[6],i[7]])}(n,i,e)?(t.add(n),t.add(i),t):(n=i,t),new Set)]}function jr(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(t)?0:"number"==typeof t?t:Math.floor(oe(t,e))}const Nr=(t,e)=>{let{seq:n=2}=e;return t.filter((t,e)=>!(e%n)||(a(t),!1))};const Tr=new Map([["hide",function(t,e,n,i){const r=t.length,{keepHeader:o,keepTail:s}=e;if(r<=1)return;if(2===r&&o&&s)return;const a=Nr,l=t=>(t.forEach(i.show),t);let u=2;const c=t.slice();let h=t.slice();const d=Math.min(1,...t.map(t=>t.getBBox().width));if("linear"===n.type&&(function(t){return 0===pr(0,t)[1]}(n)||function(t){return 0===pr(0,t)[0]}(n))){const e=Dt(t[0]).left,n=Dt(t[r-1]).right,i=Math.abs(n-e)||1;u=Math.max(Math.floor(r*d/i),u)}let p,f;for(o&&(p=c.splice(0,1)[0]),s&&(f=c.splice(-1,1)[0],c.reverse()),l(c);Or((g=f?[f,...h,p]:[p,...h],g.filter(C)),null==e?void 0:e.margin).length;){if(f&&!p&&u%2==0){c.splice(0,1).forEach(i.hide)}else if(f&&p){c.splice(0,1).forEach(i.hide)}h=a(l(c),{seq:u}),u++}var g}],["rotate",function(t,e,n,i){const{optionalAngles:r=[0,45,90],margin:o,recoverWhenFailed:s=!0}=e,a=t.map(t=>t.getLocalEulerAngles()),l=e=>t.forEach((t,n)=>{const r=L(e)?e[n]:e;i.rotate(t,+r)});for(let e=0;e<r.length;e++)if(l(r[e]),Or(t,o).length<1)return;s&&l(a)}],["ellipsis",function(t,e,n,i){if(t.length<=1)return;const{suffix:o="...",minLength:s,maxLength:a=1/0,step:l=" ",margin:u=[0,0,0,0]}=e,c=se(i.getTextShape(t[0])),h=jr(l,c),d=s?jr(s,c):h;let p=jr(a,c);(r(p)||p===1/0)&&(p=Math.max.apply(null,t.map(t=>t.getBBox().width)));let f=t.slice();const[g=0,m=0,b=g,y=m]=u;for(let e=p;e>d+h;e-=h)if(f.forEach(t=>{i.ellipsis(i.getTextShape(t),e,o)}),f=Or(t,u),f.length<1)return}]]);function _r(t,e,n){const{labelOverlap:i=[]}=e;i.length&&i.forEach(i=>{const{type:r}=i,o=Tr.get(r);(function(t,e,n){return!(e.labelOverlap.length<1)&&("hide"===n?!h(t[0]):"rotate"===n?!t.some(t=>{var e;return!(null===(e=t.attr("transform"))||void 0===e||!e.includes("rotate"))}):"ellipsis"!==n||t.map(t=>t.querySelector("text")).length>1)})(t,e,r)&&(null==o||o(t,i,e,n))})}function zr(){const t=t=>"positive"===t?-1:1;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.reduce((e,n)=>e*t(n),1)}const Gr=t=>{let e=t;for(;e<0;)e+=360;return Math.round(e%360)},Hr=ie((t,e)=>{const[n,i]=t,[r,o]=e,[s,a]=[n*r+i*o,n*o-i*r];return Math.atan2(a,s)},(t,e)=>[...t,...e].join());function Fr(t,e){return fr(t,e.labelDirection,e)}function Ir(t,e,n){var i;const{labelAlign:r}=n;if(null===(i=e.style.transform)||void 0===i?void 0:i.includes("rotate"))return e.getLocalEulerAngles();let o=0;const s=Fr(t.value,n),a=pr(t.value,n);return"horizontal"===r?0:(o="perpendicular"===r?Hr([1,0],s):Hr([a[0]<0?-1:1,0],a),function(t){let e=(t+360)%180;return W(e,-90,90)||(e+=180),e}(g(o)))}function Dr(t,e,n){const{type:i,labelAlign:r}=n,o=Fr(t,n),s=Gr(e),a=Gr(g(Hr([1,0],o)));if([90,270].includes(a)&&!s)return"middle";if(!(a%180)&&[90,270].includes(s))return"middle";if("linear"!==i)return"parallel"===r?"middle":W(s,90,270)?W(a,90,270)?"start":"end":W(a,90,270)?"end":"start";if(0===a){if(W(s,0,90,!1,!0))return"start";if(W(s,0,90)||W(s,270,360))return"start"}if(90===a){if(W(s,0,90,!1,!0))return"start";if(W(s,90,180)||W(s,270,360))return"end"}if(270===a){if(W(s,0,90,!1,!0))return"end";if(W(s,90,180)||W(s,270,360))return"start"}if(180===a){if(90===s)return"start";if(W(s,0,90)||W(s,270,360))return"end"}return"start"}function Vr(t,e,n){const{showTick:i,tickLength:r,tickDirection:o,labelDirection:s,labelSpacing:a}=n,l=e.indexOf(t),u=x(a,[t,l,e]),[c,h]=[Fr(t.value,n),zr(s,o)],d=1===h?x(i?r:0,[t,l,e]):0,[p,f]=tt(Q(c,u+d),br(t.value,n));return{x:p,y:f}}function Wr(t,e){"text"===t.nodeName&&t.attr(e)}function Rr(t){_r(this.node().childNodes,t,{hide:a,show:s,rotate:(e,n)=>{!function(t,e,n){e.setLocalEulerAngles(t);const{value:i}=e.__data__,r=Dr(i,t,n),o=e.querySelector(ir.labelItem.class);o&&Wr(o,{textAlign:r})}(+n,e,t)},ellipsis:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2?arguments[2]:void 0;t&&B(t,e,n)},getTextShape:t=>t.querySelector("text")})}function Ur(t,e,n,i,r){const o=n.indexOf(e),s=Gt(t).append(function(t,e,n,i){const{labelFormatter:r}=i;return v(r)?()=>T(x(r,[t,e,n,Fr(t.value,i)])):()=>T(t.label||"")}(e,o,n,r)).attr("className",ir.labelItem.name).node(),[a,{transform:l,...u}]=Jt(cr(i,[e,o,n]));ye(t,l);const c=Ir(e,t,r);return t.setLocalEulerAngles(+c),Wr(s,{textAlign:Dr(e.value,c,r),textBaseline:"middle",...a}),ye(t,l),t.attr(u),s}function qr(t,e,n,i){const r=hr(e,n.labelFilter),o=Xt(n,"label");return t.selectAll(ir.label.class).data(r,(t,e)=>e).join(i=>i.append("g").attr("className",ir.label.name).transition((function(t){return Ur(this,t,e,o,n),this.attr(Vr(t,e,n)),null})).call(()=>Rr.call(t,n)),r=>r.transition((function(t){return[...function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"destroy";const r=()=>{"destroy"===i?t.destroy():"hide"===i&&a(t),e.isVisible()&&s(e)};if(!n)return r(),[null];const{duration:o=0,delay:l=0}=n,u=Math.ceil(+o/2),c=+o/4,h=t=>{if("circle"===t.nodeName){const[e,n]=t.getLocalPosition(),i=t.attr("r");return[e-i,n-i]}return t.getLocalPosition()},[d,p]=h(t),[f,g]=h(e),[m,b]=[(d+f)/2-d,(p+g)/2-p],y=t.animate([{opacity:1,transform:"translate(0, 0)"},{opacity:0,transform:"translate(".concat(m,", ").concat(b,")")}],{fill:"both",...n,duration:l+u+c}),v=e.animate([{opacity:0,transform:"translate(".concat(-m,", ").concat(-b,")"),offset:.01},{opacity:1,transform:"translate(0, 0)"}],{fill:"both",...n,duration:u+c,delay:l+u-c});return Fi(v,r),[y,v]}(this.querySelector(ir.labelItem.class),Ur(this,t,e,o,n),i.update),Vi(this,Vr(t,e,n),i.update)]})).call(e=>{const i=ur(e,"_transitions").flat().filter(C);var r,o;o=()=>Rr.call(t,n),0===(r=i).length?o():Promise.all(r.map(t=>null==t?void 0:t.finished)).then(o)}),t=>t.transition((function(){const t=Wi(this,i.exit);return Fi(t,()=>Gt(this).remove()),t}))).transitions()}function Zr(t,e){return fr(t,e.tickDirection,e)}const Kr=ie((t,e)=>{const[n,i]=t;return[[0,0],[n*e,i*e]]},(t,e)=>[...t,e].join());function Yr(t,e,n,i,r,o,s){const a=Zr(t.value,o),{x1:l,x2:u,y1:c,y2:h}=function(t,e,n,i,r){const{tickLength:o}=r,[[s,a],[l,u]]=Kr(i,x(o,[t,e,n]));return{x1:s,x2:l,y1:a,y2:u}}(t,e,n,a,o),[d,p]=Jt(cr(s,[t,e,n,a]));"line"===i.node().nodeName&&i.styles({x1:l,x2:u,y1:c,y2:h,...d}),r.attr(p),i.styles(d)}function Xr(t,e,n,i,r,o){Yr(t,e,n,function(t,e,n,i,r){const{tickFormatter:o}=r,s=Zr(e.value,r);let a="line";return v(o)&&(a=()=>x(o,[e,n,i,s])),t.append(a).attr("className",ir.tickItem.name)}(Gt(this),t,e,n,i),this,i,r);const[s,a]=br(t.value,i);return Vi(this,{x:s,y:a},o)}function $r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Jr=w({text:"text"},"title");function Qr(t){return/\S+-\S+/g.test(t)?t.split("-").map(t=>t[0]):t.length>2?[t[0]]:t.split("")}function to(t,e){const n=Object.entries(e).reduce((e,n)=>{let[i,r]=n;return t.node().attr(i)||(e[i]=r),e},{});t.styles(n)}class eo extends Se{constructor(t){super(t,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"}),$r(this,"title",void 0)}getAvailableSpace(){const{width:t,height:e,position:n,spacing:i,inset:r}=this.attributes,o=this.querySelector(Jr.text.class);if(!o)return new b(0,0,+t,+e);const{width:s,height:a}=o.getBBox(),[l,u,c,h]=Ft(i);let[d,p,f,g]=[0,0,+t,+e];const m=Qr(n);if(m.includes("i"))return new b(d,p,f,g);m.forEach((n,i)=>{"t"===n&&([p,g]=0===i?[a+c,+e-a-c]:[0,+e]),"r"===n&&([f]=[+t-s-h]),"b"===n&&([g]=[+e-a-l]),"l"===n&&([d,f]=0===i?[s+u,+t-s-u]:[0,+t])});const[y,v,x,w]=Ft(r),[S,k]=[w+v,y+x];return new b(d+w,p+y,f-S,g-k)}getBBox(){return this.title?this.title.getBBox():new b(0,0,0,0)}render(t,e){const{width:n,height:i,position:r,spacing:o,...s}=t,[a]=Jt(s),{x:l,y:u,textAlign:c,textBaseline:h}=function(t){const{width:e,height:n,position:i}=t,[r,o]=[+e/2,+n/2];let[s,a,l,u]=[+r,+o,"center","middle"];const c=Qr(i);return c.includes("l")&&([s,l]=[0,"start"]),c.includes("r")&&([s,l]=[+e,"end"]),c.includes("t")&&([a,u]=[0,"top"]),c.includes("b")&&([a,u]=[+n,"bottom"]),{x:s,y:a,textAlign:l,textBaseline:u}}(t);V(!!s.text,Gt(e),t=>{this.title=t.maybeAppendByClassName(Jr.text,"text").styles(a).call(to,{x:l,y:u,textAlign:c,textBaseline:h}).node()})}}function no(t,e,n,i,r){const o=Xt(i,"title"),[s,{transform:a="",...l}]=Jt(o);t.styles(s),e.styles(l),ye(t.node(),a);const{x:u,y:c}=function(t,e,n){const{titlePosition:i="lb",titleSpacing:r}=n,o=Qr(i),{min:[s,a],halfExtents:[l,u]}=t.node().getLocalBounds(),[c,h]=e.node().getLocalBounds().halfExtents;let[d,p]=[s+l,a+u];const[f,g,m,b]=Ft(r);if(["start","end"].includes(i)&&"linear"===n.type){const{startPos:t,endPos:e}=n,[r,o]="start"===i?[t,e]:[e,t],s=ot([-o[0]+r[0],-o[1]+r[1]]),[a,l]=Q(s,f);return{x:r[0]+a,y:r[1]+l}}return o.includes("t")&&(p-=u+h+f),o.includes("r")&&(d+=l+c+g),o.includes("l")&&(d-=l+c+b),o.includes("b")&&(p+=u+h+m),{x:d,y:p}}(Gt(n._offscreen||n.querySelector(ir.mainGroup.class)),e,i),h=Vi(e.node(),{x:u,y:c},r);return ye(t.node(),a),h}function io(t,e,n,i){const{showLine:r,showTick:o,showLabel:s}=t;return[...V(r,e.maybeAppendByClassName(ir.lineGroup,"g"),e=>Sr(e,t,i))||[],...V(o,e.maybeAppendByClassName(ir.tickGroup,"g"),e=>function(t,e,n,i){const r=hr(e,n.tickFilter),o=Xt(n,"tick");return t.selectAll(ir.tick.class).data(r,t=>t.id||t.label).join(t=>t.append("g").attr("className",ir.tick.name).transition((function(t,e){return Xr.call(this,t,e,r,n,o,!1)})),t=>t.transition((function(t,e){return this.removeChildren(),Xr.call(this,t,e,r,n,o,i.update)})),t=>t.transition((function(){const t=Wi(this,i.exit);return Fi(t,()=>this.remove()),t}))).transitions()}(e,n,t,i))||[],...V(s,e.maybeAppendByClassName(ir.labelGroup,"g"),e=>qr(e,n,t,i))||[]].filter(t=>!!t)}class ro extends Se{constructor(t){super(t,nr)}render(t,e,n){const{titleText:i,data:r,animate:o,showTitle:s,showGrid:a,dataThreshold:l,truncRange:u}=t,c=St(r,l).filter(t=>{let{value:e}=t;return!(u&&e>u[0]&&e<u[1])}),h=Hi(void 0===n?o:n),d=V(a,Gt(e).maybeAppendByClassName(ir.gridGroup,"g"),e=>Ar(e,c,t,h))||[],p=Gt(e).maybeAppendByClassName(ir.mainGroup,"g");i&&(!this.initialized&&h.enter||this.initialized&&h.update)&&io(t,Gt(this.offscreenGroup),c,Hi(!1));return[...d,...io(t,Gt(p.node()),c,h),...V(s,Gt(e).maybeAppendByClassName(ir.titleGroup,"g"),e=>function(t,e,n,i){if(!n.titleText)return null;const{titleText:r}=n;return t.selectAll(ir.title.class).data([{title:r}],(t,e)=>t.title).join(o=>o.append(()=>T(r)).attr("className",ir.title.name).transition((function(){return no(Gt(this),t,e,n,i.enter)})),r=>r.transition((function(){return no(Gt(this),t,e,n,i.update)})),t=>t.remove()).transitions()}(e,this,t,h))||[]].flat().filter(t=>!!t)}}class oo{}var so=function(){};var ao=function(t,e,n){var i;return function(){var r=this,o=arguments,s=function(){i=null,n||t.apply(r,o)},a=n&&!i;clearTimeout(i),i=setTimeout(s,e),a&&t.apply(r,o)}};function lo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const uo=w({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator");class co extends Se{constructor(t){var e,n,r;super(t,{animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonPath:(e=0,n=0,r=6,[["M",e-r,n-r],["L",e+r,n],["L",e-r,n+r],["Z"]]),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:(t,e)=>"".concat(t,"/").concat(e),defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"}),lo(this,"playState","idle"),lo(this,"contentGroup",this.appendChild(new i.Group({class:uo.contentGroup.name}))),lo(this,"playWindow",this.contentGroup.appendChild(new i.Group({class:uo.playWindow.name}))),lo(this,"innerCurrPage",this.defaultPage),lo(this,"clipPath",void 0),lo(this,"prevBtnGroup",void 0),lo(this,"nextBtnGroup",void 0),lo(this,"pageInfoGroup",void 0)}get defaultPage(){const{defaultPage:t}=this.attributes;return ki(t,0,Math.max(this.pageViews.length-1,0))}get pageViews(){return this.playWindow.children}get controllerShape(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}}get pageShape(){const{pageViews:t}=this,[e,n]=ve(t.map(t=>{const{width:e,height:n}=t.getBBox();return[e,n]})).map(t=>Math.max(...t)),{pageWidth:i=e,pageHeight:r=n}=this.attributes;return{pageWidth:i,pageHeight:r}}getContainer(){return this.playWindow}get totalPages(){return this.pageViews.length}get currPage(){return this.innerCurrPage}getBBox(){const{x:t,y:e}=super.getBBox(),n=this.controllerShape,{pageWidth:i,pageHeight:r}=this.pageShape;return new b(t,e,i+n.width,r)}goTo(t){const{animate:e}=this.attributes,{currPage:n,playState:i,playWindow:r,pageViews:o}=this;if("idle"!==i||t<0||o.length<=0||t>=o.length)return null;o[n].setLocalPosition(0,0),this.prepareFollowingPage(t);const[s,a]=this.getFollowingPageDiff(t);this.playState="running";const l=Di(r,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-s,", ").concat(-a,")")}],e);return Fi(l,()=>{this.innerCurrPage=t,this.playState="idle",this.setVisiblePages([t]),this.updatePageInfo()}),l}prev(){const{loop:t}=this.attributes,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;const i=t?(n-1+e)%e:ki(n-1,0,e);return this.goTo(i)}next(){const{loop:t}=this.attributes,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;const i=t?(n+1)%e:ki(n+1,0,e);return this.goTo(i)}renderClipPath(t){const{pageWidth:e,pageHeight:n}=this.pageShape;e&&n?(this.clipPath=t.maybeAppendByClassName(uo.clipPath,"rect").styles({width:e,height:n}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0}setVisiblePages(t){this.playWindow.children.forEach((e,n)=>{t.includes(n)?s(e):a(e)})}adjustControllerLayout(){const{prevBtnGroup:t,nextBtnGroup:e,pageInfoGroup:n}=this,{orientation:i,controllerPadding:r}=this.attributes,{width:o,height:s}=n.getBBox(),[a,l]="horizontal"===i?[-180,0]:[-90,90];t.setLocalEulerAngles(a),e.setLocalEulerAngles(l);const{width:u,height:c}=t.getBBox(),{width:h,height:d}=e.getBBox(),p=Math.max(u,o,h),{offset:[[f,g],[m,b],[y,v]],textAlign:x}="horizontal"===i?{offset:[[0,0],[u/2+r,0],[u+o+2*r,0]],textAlign:"start"}:{offset:[[p/2,-c-r],[p/2,0],[p/2,d+r]],textAlign:"center"},w=n.querySelector("text");w&&(w.style.textAlign=x),t.setLocalPosition(f,g),n.setLocalPosition(m,b),e.setLocalPosition(y,v)}updatePageInfo(){var t;const{currPage:e,pageViews:n,attributes:{formatter:i}}=this;n.length<2||(null===(t=this.pageInfoGroup.querySelector(uo.pageInfo.class))||void 0===t||t.attr("text",i(e+1,n.length)),this.adjustControllerLayout())}getFollowingPageDiff(t){const{currPage:e}=this;if(e===t)return[0,0];const{orientation:n}=this.attributes,{pageWidth:i,pageHeight:r}=this.pageShape,o=t<e?-1:1;return"horizontal"===n?[o*i,0]:[0,o*r]}prepareFollowingPage(t){const{currPage:e,pageViews:n}=this;if(this.setVisiblePages([t,e]),t!==e){const[e,i]=this.getFollowingPageDiff(t);n[t].setLocalPosition(e,i)}}renderController(t){const{controllerSpacing:e}=this.attributes,{pageWidth:n,pageHeight:i}=this.pageShape,r=this.pageViews.length>=2,o=t.maybeAppendByClassName(uo.controller,"g");if(l(o.node(),r),!r)return;const s=Xt(this.attributes,"button"),a=Xt(this.attributes,"pageNum"),[{size:u,...c},h]=Jt(s),d=!o.select(uo.prevBtnGroup.class).node(),p=o.maybeAppendByClassName(uo.prevBtnGroup,"g").styles(h);this.prevBtnGroup=p.node();const f=p.maybeAppendByClassName(uo.prevBtn,"path"),g=o.maybeAppendByClassName(uo.nextBtnGroup,"g").styles(h);this.nextBtnGroup=g.node();[f,g.maybeAppendByClassName(uo.nextBtn,"path")].forEach(t=>{t.styles({...c,transformOrigin:"center"}),kt(t.node(),u,!0)});const m=o.maybeAppendByClassName(uo.pageInfoGroup,"g");this.pageInfoGroup=m.node(),m.maybeAppendByClassName(uo.pageInfo,"text").styles(a),this.updatePageInfo(),o.node().setLocalPosition(n+e,i/2),d&&(this.prevBtnGroup.addEventListener("click",()=>{this.prev()}),this.nextBtnGroup.addEventListener("click",()=>{this.next()}))}render(t,e){const n=Gt(e);this.renderClipPath(n),this.renderController(n),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)}bindEvents(){const t=ao(()=>this.render(this.attributes,this),50);this.playWindow.addEventListener(i.ElementEvent.INSERTED,t),this.playWindow.addEventListener(i.ElementEvent.REMOVED,t)}}Te.registerSymbol("hiddenHandle",(function(t,e,n){const i=1.4*n;return[["M",t-n,e-i],["L",t+n,e-i],["L",t+n,e+i],["L",t-n,e+i],["Z"]]})),Te.registerSymbol("verticalHandle",(function(t,e,n){const i=1.4*n,r=n/2,o=n/6,s=t+.4*i;return[["M",t,e],["L",s,e+r],["L",t+i,e+r],["L",t+i,e-r],["L",s,e-r],["Z"],["M",s,e+o],["L",t+i-2,e+o],["M",s,e-o],["L",t+i-2,e-o]]})),Te.registerSymbol("horizontalHandle",(function(t,e,n){const i=1.4*n,r=n/2,o=n/6,s=e+.4*i;return[["M",t,e],["L",t-r,s],["L",t-r,e+i],["L",t+r,e+i],["L",t+r,s],["Z"],["M",t-o,s],["L",t-o,e+i-2],["M",t+o,s],["L",t+o,e+i-2]]}));function ho(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return"horizontal"===t?e:n}function po(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const fo=w({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");class go extends Se{constructor(t){super(t,{span:[1,1],marker:()=>new i.Circle({style:{r:6}}),markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"}),po(this,"markerGroup",void 0),po(this,"labelGroup",void 0),po(this,"valueGroup",void 0),po(this,"background",void 0)}get showValue(){const{valueText:t}=this.attributes;return!!t&&("string"==typeof t||"number"==typeof t?""!==t:"function"==typeof t||""!==t.attr("text"))}get actualSpace(){const t=this.labelGroup,e=this.valueGroup,{markerSize:n}=this.attributes,{width:i,height:r}=t.node().getBBox(),{width:o,height:s}=e.node().getBBox();return{markerWidth:n,labelWidth:i,valueWidth:o,height:Math.max(n,r,s)}}get span(){const{span:t}=this.attributes;if(!t)return[1,1];const[e,n]=Ft(t),i=this.showValue?n:0,r=e+i;return[e/r,i/r]}get shape(){const{markerSize:t,width:e}=this.attributes,n=this.actualSpace,{markerWidth:i,height:r}=n;let{labelWidth:o,valueWidth:s}=this.actualSpace;const[a,l]=this.spacing;if(e){const n=e-t-a-l,[i,r]=this.span;[o,s]=[i*n,r*n]}return{width:i+o+s+a+l,height:r,markerWidth:i,labelWidth:o,valueWidth:s}}get spacing(){const{spacing:t}=this.attributes;if(!t)return[0,0];const[e,n]=Ft(t);return this.showValue?[e,n]:[e,0]}get layout(){const{markerWidth:t,labelWidth:e,valueWidth:n,width:i,height:r}=this.shape,[o,s]=this.spacing;return{height:r,width:i,markerWidth:t,labelWidth:e,valueWidth:n,position:[t/2,t+o,t+e+o+s]}}get scaleSize(){const t=function(t){const e=t.querySelector(fo.marker.class);return e?e.style:{}}(this.markerGroup.node()),{markerSize:e,markerStrokeWidth:n=t.strokeWidth,markerLineWidth:i=t.lineWidth,markerStroke:r=t.stroke}=this.attributes,o=+(n||i||(r?1:0))*Math.sqrt(2),{width:s,height:a}=this.markerGroup.node().getBBox();return(1-o/Math.max(s,a))*e}renderMarker(t){const{marker:e}=this.attributes,n=Xt(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(fo.markerGroup,"g").style("zIndex",0),V(!!e,this.markerGroup,()=>{this.markerGroup.maybeAppendByClassName(fo.marker,e).styles(n),this.markerGroup.node().scale(1/this.markerGroup.node().getScale()[0]),kt(this.markerGroup.node(),this.scaleSize,!0)})}renderLabel(t){const{text:e,...n}=Xt(this.attributes,"label");this.labelGroup=t.maybeAppendByClassName(fo.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(fo.label,()=>T(e)).styles(n)}renderValue(t){const{text:e,...n}=Xt(this.attributes,"value");this.valueGroup=t.maybeAppendByClassName(fo.valueGroup,"g").style("zIndex",0),V(this.showValue,this.valueGroup,()=>{this.valueGroup.maybeAppendByClassName(fo.value,()=>T(e)).styles(n)})}renderBackground(t){const{width:e,height:n}=this.shape,i=Xt(this.attributes,"background");this.background=t.maybeAppendByClassName(fo.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(fo.background,"rect").styles({width:e,height:n,...i})}adjustLayout(){const{layout:{labelWidth:t,valueWidth:e,height:n,position:[i,r,o]}}=this,s=n/2;this.markerGroup.styles({x:i,y:s}),this.labelGroup.styles({x:r,y:s}),B(this.labelGroup.select(fo.label.class).node(),Math.ceil(t)),this.showValue&&(this.valueGroup.styles({x:o,y:s}),B(this.valueGroup.select(fo.value.class).node(),Math.ceil(e)))}render(t,e){const n=Gt(e);this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.adjustLayout()}}function mo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const bo=w({page:"item-page",navigator:"navigator",item:"item"},"items"),yo=function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t?e(t):n};class vo extends Se{constructor(t){super(t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:so,mouseenter:so,mouseleave:so}),mo(this,"navigator",void 0),mo(this,"navigatorShape",[0,0])}get pageViews(){return this.navigator.getContainer()}get grid(){const{gridRow:t,gridCol:e,data:n}=this.attributes;if(!t&&!e)throw new Error("gridRow and gridCol can not be set null at the same time");return t&&e?[t,e]:t?[t,n.length]:[n.length,e]}get renderData(){const{data:t,layout:e}=this.attributes,n=Xt(this.attributes,"item");return t.map((i,r)=>{const{id:o=r,label:s,value:a}=i;return{id:"".concat(o),index:r,style:{layout:e,labelText:s,valueText:a,...Object.fromEntries(Object.entries(n).map(e=>{let[n,o]=e;return[n,x(o,[i,r,t])]}))}}})}getGridLayout(){const{orientation:t,width:e,rowPadding:n,colPadding:i}=this.attributes,[r]=this.navigatorShape,[o,s]=this.grid,a=s*o;let l=0;return this.pageViews.children.map((u,c)=>{const h=Math.floor(c/a),d=c%a,p=this.ifHorizontal(s,o),f=[Math.floor(d/p),d%p];"vertical"===t&&f.reverse();const[g,m]=f,b=(e-r-(s-1)*i)/s,y=u.getBBox().height;let[v,x]=[0,0];return"horizontal"===t?([v,x]=[l,g*(y+n)],l=m===s-1?0:l+b+i):([v,x]=[m*(b+i),l],l=g===o-1?0:l+y+n),{page:h,index:c,row:g,col:m,pageIndex:d,width:b,height:y,x:v,y:x}})}getFlexLayout(){const{width:t,height:e,rowPadding:n,colPadding:i}=this.attributes,[r]=this.navigatorShape,[o,s]=this.grid,[a,l]=[t-r,e];let[u,c,h,d,p,f,g,m]=[0,0,0,0,0,0,0,0];return this.pageViews.children.map((t,e)=>{const{width:r,height:b}=t.getBBox(),y=0===g?0:i,v=g+y+r;if(v<=a&&yo(p,t=>t<s))return[u,c,g]=[g+y,m,v],{width:r,height:b,x:u,y:c,page:h,index:e,pageIndex:d++,row:f,col:p++};[f,p,g,m]=[f+1,0,0,m+b+n];return m+n+b<=l&&yo(f,t=>t<o)?([u,c,g]=[g,m,r],{width:r,height:b,x:u,y:c,page:h,index:e,pageIndex:d++,row:f,col:p++}):([u,c,g,m,h,d,f,p]=[0,0,r,0,h+1,0,0,0],{width:r,height:b,x:u,y:c,page:h,index:e,pageIndex:d++,row:f,col:p++})})}get itemsLayout(){this.navigatorShape=[0,0];const t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e}ifHorizontal(t,e){const{orientation:n}=this.attributes;return ho(n,t,e)}flattenPage(t){t.querySelectorAll(bo.item.class).forEach(e=>{t.appendChild(e)}),t.querySelectorAll(bo.page.class).forEach(e=>{t.removeChild(e).destroy()})}renderItems(t){const{click:e,mouseenter:n,mouseleave:i}=this.attributes;this.flattenPage(t);const r=this.dispatchCustomEvent.bind(this);Gt(t).selectAll(bo.item.class).data(this.renderData,t=>t.id).join(t=>t.append(t=>{let{style:e}=t;return new go({style:e})}).attr("className",bo.item.name).on("click",(function(){null==e||e(this),r("itemClick",{item:this})})).on("pointerenter",(function(){null==n||n(this),r("itemMouseenter",{item:this})})).on("pointerleave",(function(){null==i||i(this),r("itemMouseleave",{item:this})})),t=>t.each((function(t){let{style:e}=t;this.update(e)})),t=>t.remove())}relayoutNavigator(){var t;const{layout:e,width:n}=this.attributes,i=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,[r,o]=this.navigatorShape;this.navigator.update("grid"===e?{pageWidth:n-r,pageHeight:i-o}:{})}adjustLayout(){const t=Object.entries(F(this.itemsLayout,"page")).map(t=>{let[e,n]=t;return{page:e,layouts:n}}),e=[...this.navigator.getContainer().children];t.forEach(t=>{let{layouts:n}=t;const r=this.pageViews.appendChild(new i.Group({className:bo.page.name}));n.forEach(t=>{const{x:n,y:i,index:o,width:s,height:a}=t,l=e[o];r.appendChild(l),function(t,e,n){var i=t,r=j(e)?e.split("."):e;r.forEach((function(t,e){e<r.length-1?(Oe(i[t])||(i[t]=N(r[e+1])?[]:{}),i=i[t]):i[t]=n}))}(l,"__layout__",t),l.update({x:n,y:i,width:s,height:a})})}),this.relayoutNavigator()}renderNavigator(t){const{orientation:e}=this.attributes,n=Xt(this.attributes,"nav"),i=E({orientation:e},n),r=this;return t.selectAll(bo.navigator.class).data(["nav"]).join(t=>t.append(()=>new co({style:i})).attr("className",bo.navigator.name).each((function(){r.navigator=this})),t=>t.each((function(){this.update(i)})),t=>t.remove()),this.navigator}getBBox(){return this.navigator.getBBox()}render(t,e){const{data:n}=this.attributes;if(!n||0===n.length)return;const i=this.renderNavigator(Gt(e));this.renderItems(i.getContainer()),this.adjustLayout()}dispatchCustomEvent(t,e){const n=new i.CustomEvent(t,{detail:e});this.dispatchEvent(n)}}function xo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const wo=w({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),So={showLabel:!0,formatter:t=>t.toString(),markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0};class ko extends Se{constructor(t){super(t,So),xo(this,"marker",void 0)}render(t,e){const n=Gt(e).maybeAppendByClassName(wo.markerGroup,"g");this.renderMarker(n);const i=Gt(e).maybeAppendByClassName(wo.labelGroup,"g");this.renderLabel(i)}renderMarker(t){const{orientation:e,markerSymbol:n=ho(e,"horizontalHandle","verticalHandle")}=this.attributes;V(!!n,t,t=>{const e=Xt(this.attributes,"marker"),i={symbol:n,...e};this.marker=t.maybeAppendByClassName(wo.marker,()=>new Te({style:i})).update(i)})}renderLabel(t){const{showLabel:e,orientation:n,spacing:i=0,formatter:r}=this.attributes;V(e,t,t=>{var e;const{text:o,...s}=Xt(this.attributes,"label"),{width:a=0,height:l=0}=(null===(e=t.select(wo.marker.class))||void 0===e?void 0:e.node().getBBox())||{},[u,c,h,d]=ho(n,[0,l+i,"center","top"],[a+i,0,"start","middle"]);t.maybeAppendByClassName(wo.label,"text").styles({...s,x:u,y:c,text:r(o).toString(),textAlign:h,textBaseline:d})})}}const Po={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},Ao=E({},Po,{}),Lo=E({},Po,$t(So,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),Mo=w({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function Eo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Co extends Se{constructor(t){super(t,Ao),Eo(this,"titleGroup",void 0),Eo(this,"title",void 0),Eo(this,"itemsGroup",void 0),Eo(this,"items",void 0)}renderTitle(t,e,n){const{showTitle:i,titleText:r}=this.attributes,o=Xt(this.attributes,"title"),[s,a]=Jt(o);this.titleGroup=t.maybeAppendByClassName(Mo.titleGroup,"g").styles(a);const l={width:e,height:n,...s,text:i?r:""};this.title=this.titleGroup.maybeAppendByClassName(Mo.title,()=>new eo({style:l})).update(l)}renderItems(t,e){const{x:n,y:i,width:r,height:o}=e,s=Xt(this.attributes,"title",!0),[a,l]=Jt(s),u={...a,width:r,height:o,x:0,y:0};this.itemsGroup=t.maybeAppendByClassName(Mo.itemsGroup,"g").styles({x:n,y:i,...l});const c=this;this.itemsGroup.selectAll(Mo.items.class).data(["items"]).join(t=>t.append(()=>new vo({style:u})).attr("className",Mo.items.name).each((function(){c.items=Gt(this)})),t=>t.update(u),t=>t.remove())}adjustLayout(){const{showTitle:t}=this.attributes;if(t){const{x:t,y:e}=this.title.node().getAvailableSpace();this.itemsGroup.node().setLocalPosition(t,e)}}get availableSpace(){const{showTitle:t,width:e,height:n}=this.attributes;return t?this.title.node().getAvailableSpace():new b(0,0,e,n)}getBBox(){var t,e;const n=null===(t=this.title)||void 0===t?void 0:t.node(),i=null===(e=this.items)||void 0===e?void 0:e.node();return n&&i?function(t,e){const{position:n,spacing:i,inset:r,text:o}=t.attributes,s=t.getBBox(),a=e.getBBox(),l=Qr(n),[u,c,h,d]=Ft(o?i:0),[p,f,g,m]=Ft(r),[y,v]=[d+c,u+h],[x,w]=[m+f,p+g];if("l"===l[0])return new b(s.x,s.y,a.width+s.width+y+x,Math.max(a.height+w,s.height));if("t"===l[0])return new b(s.x,s.y,Math.max(a.width+x,s.width),a.height+s.height+v+w);const[S,k]=[e.attributes.width||a.width,e.attributes.height||a.height];return new b(a.x,a.y,S+s.width+y+x,k+s.height+v+w)}(n,i):super.getBBox()}render(t,e){const{width:n,height:i}=t,r=Gt(e);this.renderTitle(r,n,i),this.renderItems(r,this.availableSpace),this.adjustLayout()}}const Bo={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:t=>t.toString(),labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",zIndex:999};function Oo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const jo=w({background:"background",labelGroup:"label-group",label:"label"},"indicator");class No extends Se{constructor(t){super(t,Bo),Oo(this,"group",void 0),Oo(this,"background",void 0),Oo(this,"label",void 0),Oo(this,"point",[0,0]),this.group=this.appendChild(new i.Group({})),this.isMutationObserved=!0}renderBackground(){if(!this.label)return;const{position:t,padding:e}=this.attributes,[n,i,r,o]=Ft(e),{min:s,max:a}=this.label.node().getLocalBounds(),l=[[s[0]-o,s[1]-n],[a[0]+i,a[1]+r]],u=this.getPath(t,l),c=Xt(this.attributes,"background");this.background=Gt(this.group).maybeAppendByClassName(jo.background,"path").styles({...c,path:u}),this.group.appendChild(this.label.node())}renderLabel(){const{formatter:t,labelText:e}=this.attributes,n=Xt(this.attributes,"label"),[{text:i,...r},o]=Jt(n);if(this.label=Gt(this.group).maybeAppendByClassName(jo.labelGroup,"g").styles(o),!e)return;this.label.maybeAppendByClassName(jo.label,()=>T(t(e))).style("text",t(e).toString()).selectAll("text").styles(r)}adjustLayout(){const[t,e]=this.point;this.group.attr("x",-t).attr("y",-e)}getPath(t,e){const[[n,i],[r,o]]=e,s={top:[[n,i],[r,i]],right:[[r,i],[r,o]],bottom:[[r,o],[n,o]],left:[[n,o],[n,i]]},a={top:"bottom",right:"left",bottom:"top",left:"right"},l=Object.entries(s).map(e=>{let[n,i]=e;return n===a[t]?this.createCorner(i):[["M",...i[0]],["L",...i[1]]]});return l.push([["Z"]]),l.flat().filter((t,e,n)=>0===e||"M"!==t[0])}createCorner(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const n=Wt(...t),[[i,r],[o,s]]=t,[a,[l,u]]=n?[o-i,[i,o]]:[s-r,[r,s]],c=a/2,h=e*(a/Math.abs(a)),d=h/2,p=h*Math.sqrt(3)/2*.8,[f,g,m,b,y]=[l,l+c-d,l+c,l+c+d,u];return n?(this.point=[m,r-p],[["M",f,r],["L",g,r],["L",m,r-p],["L",b,r],["L",y,r]]):(this.point=[i+p,m],[["M",i,f],["L",i,g],["L",i+p,m],["L",i,b],["L",i,y]])}bindEvents(){this.label.on(i.ElementEvent.BOUNDS_CHANGED,this.renderBackground)}render(){this.renderLabel(),this.renderBackground(),this.adjustLayout()}}function To(t,e){const[n,i]=function(t,e){for(let n=1;n<t.length;n+=1){const i=t[n-1],r=t[n];if(e>=i&&e<=r)return[i,r]}return[e,e]}(t,e);return{tick:e>(n+i)/2?i:n,range:[n,i]}}const _o=w({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function zo(t){const{orientation:e,size:n,length:i}=t;return ho(e,[i,n],[n,i])}function Go(t){const{type:e}=t,[n,i]=zo(t);return"size"===e?[["M",0,i],["L",0+n,0],["L",0+n,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+n,0],["L",0+n,i],["Z"]]}function Ho(t){return Go(t)}function Fo(t){const{orientation:e,color:n,block:r,partition:o}=t;let s;if(v(n)){s=new Array(20).fill(0).map((t,e,i)=>n(e/(i.length-1)))}else s=n;const a=s.length,l=s.map(t=>Object(i.parseColor)(t).toString());return a?1===a?l[0]:r?function(t,e,n){const i=Array.from(e),r=t.length;return new Array(r).fill(0).reduce((e,n,o)=>{const s=i[o%i.length];return e+" ".concat(t[o],":").concat(s).concat(o<r-1?" ".concat(t[o+1],":").concat(s):"")},"l(".concat("horizontal"===n?"0":"270",")"))}(o,l,e):l.reduce((t,e,n)=>t+" ".concat(n/(a-1),":").concat(e),"l(".concat(ho(e,"0","270"),")")):""}function Io(t){const{orientation:e,range:n}=t;if(!n)return[];const[i,r]=zo(t),[o,s]=n,a=ho(e,o*i,0),l=ho(e,0,o*r),u=ho(e,s*i,i),c=ho(e,r,s*r);return[["M",a,l],["L",a,c],["L",u,c],["L",u,l],["Z"]]}class Do extends Se{constructor(t){super(t,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})}render(t,e){!function(t,e){const n=Xt(e,"track");t.maybeAppendByClassName(_o.track,"path").styles({path:Go(e),...n})}(Gt(e).maybeAppendByClassName(_o.trackGroup,"g"),t);!function(t,e){const n=Xt(e,"selection"),i=Fo(e),r=t.maybeAppendByClassName(_o.selection,"path").styles({path:Ho(e),fill:i,...n}),o=r.maybeAppendByClassName(_o.clipPath,"path").styles({path:Io(e)}).node();r.style("clip-path",o)}(Gt(e).maybeAppendByClassName(_o.selectionGroup,"g"),t)}}function Vo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Wo=ie(t=>({min:Math.min(...t.map(t=>t.value)),max:Math.max(...t.map(t=>t.value))}),t=>t.map(t=>t.id));class Ro extends Se{constructor(t){super(t,Lo),Vo(this,"eventToOffsetScale",new $n({})),Vo(this,"innerRibbonScale",new $n({})),Vo(this,"title",void 0),Vo(this,"label",void 0),Vo(this,"ribbon",void 0),Vo(this,"indicator",void 0),Vo(this,"handlesGroup",void 0),Vo(this,"startHandle",void 0),Vo(this,"endHandle",void 0),Vo(this,"cacheLabelBBox",null),Vo(this,"cacheHandleBBox",null),Vo(this,"target",void 0),Vo(this,"prevValue",void 0),Vo(this,"onHovering",t=>{const{data:e,block:n}=this.attributes;t.stopPropagation();const i=this.getValueByCanvasPoint(t);if(n){const{range:t}=To(e.map(t=>{let{value:e}=t;return e}),i);this.showIndicator((t[0]+t[1])/2,"".concat(t[0],"-").concat(t[1])),this.dispatchIndicated(i,t)}else{const t=this.getTickValue(i);this.showIndicator(t),this.dispatchIndicated(t)}}),Vo(this,"onDragStart",t=>e=>{e.stopPropagation(),this.attributes.slidable&&(this.target=t,this.prevValue=this.getTickValue(this.getValueByCanvasPoint(e)),document.addEventListener("mousemove",this.onDragging),document.addEventListener("touchmove",this.onDragging),document.addEventListener("mouseleave",this.onDragEnd),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("mouseup",this.onDragEnd),document.addEventListener("touchend",this.onDragEnd))}),Vo(this,"onDragging",t=>{const{target:e}=this;this.updateMouse();const[n,i]=this.selection,r=this.getTickValue(this.getValueByCanvasPoint(t)),o=r-this.prevValue;"start"===e?n!==r&&this.updateSelection(r,i):"end"===e?i!==r&&this.updateSelection(n,r):"ribbon"===e&&0!==o&&(this.prevValue=r,this.updateSelection(o,o,!0))}),Vo(this,"onDragEnd",()=>{this.style.cursor="default",document.removeEventListener("mousemove",this.onDragging),document.removeEventListener("touchmove",this.onDragging),document.removeEventListener("mouseup",this.onDragEnd),document.removeEventListener("touchend",this.onDragEnd)})}get handleOffsetRatio(){return this.ifHorizontal(.7,.9)}getBBox(){const{width:t,height:e}=this.attributes;return new b(0,0,t,e)}render(t,e){const{showLabel:n}=t;this.renderTitle(Gt(e));const{x:i,y:r}=this.availableSpace,o=Gt(e).maybeAppendByClassName(Mo.contentGroup,"g").styles({x:i,y:r});V(!!n,o.maybeAppendByClassName(Mo.labelGroup,"g").styles({zIndex:1}),t=>{this.renderLabel(t)});const s=o.maybeAppendByClassName(Mo.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=o.maybeAppendByClassName(Mo.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(s),this.renderIndicator(o),this.adjustLabel(),this.adjustHandles()}get range(){const{data:t}=this.attributes;return Wo(t)}get ribbonScale(){const{min:t,max:e}=this.range;return this.innerRibbonScale.update({domain:[t,e],range:[0,1]}),this.innerRibbonScale}get ribbonRange(){const[t,e]=this.selection,n=this.ribbonScale;return[n.map(t),n.map(e)]}get selection(){const{min:t,max:e}=this.range,{defaultValue:[n,i]=[t,e]}=this.attributes;return[n,i]}ifHorizontal(t,e){return ho(this.attributes.orientation,"function"==typeof t?t():t,"function"==typeof e?e():e)}renderTitle(t){const{showTitle:e,titleText:n,width:i,height:r}=this.attributes,o={...Xt(this.attributes,"title"),width:i,height:r,text:n},s=this;t.selectAll(Mo.title.class).data(e?[n]:[]).join(t=>t.append(()=>new eo({style:o})).attr("className",Mo.title.name).each((function(){s.title=this})),t=>t.update(o),t=>t.each(()=>{s.title=void 0}).remove())}get availableSpace(){if(this.title)return this.title.getAvailableSpace();const{width:t,height:e}=this.attributes;return new b(0,0,t,e)}get labelFixedSpacing(){const{showTick:t}=this.attributes;return t?5:0}get labelPosition(){const{orientation:t,labelDirection:e}=this.attributes;return{vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}}[t][e]}get labelBBox(){var t;const{showLabel:e}=this.attributes;if(!e)return new b(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;const{width:n,height:i}=(null===(t=this.label.querySelector(ir.labelGroup.class))||void 0===t?void 0:t.children.slice(-1)[0]).getBBox();return this.cacheLabelBBox=new b(0,0,n,i),this.cacheLabelBBox}get labelShape(){const{showLabel:t,labelSpacing:e=0}=this.attributes;if(!t)return{width:0,height:0,size:0,length:0};const{width:n,height:i}=this.labelBBox;return{width:n,height:i,size:this.ifHorizontal(i,n)+e+this.labelFixedSpacing,length:this.ifHorizontal(n,i)}}get ribbonBBox(){const{showHandle:t,ribbonSize:e}=this.attributes,{width:n,height:i}=this.availableSpace,{size:r,length:o}=this.labelShape,[s,a]=this.ifHorizontal([i,n],[n,i]),{size:l,length:u}=t?this.handleShape:{size:0,length:0},c=this.handleOffsetRatio;let h=0;const d=this.labelPosition;h=e||(["bottom","right"].includes(d)?Math.min(s-r,(s-l)/c):s*(1-c)>l?Math.max(s-r,0):Math.max((s-r-l)/c,0));const p=Math.max(u,o),f=a-p,[g,m]=this.ifHorizontal([f,h],[h,f]),y=["top","left"].includes(d)?r:0,[v,x]=this.ifHorizontal([p/2,y],[y,p/2]);return new b(v,x,g,m)}get ribbonShape(){const{width:t,height:e}=this.ribbonBBox;return this.ifHorizontal({size:e,length:t},{size:t,length:e})}renderRibbon(t){const{data:e,type:n,orientation:i,color:r,block:o}=this.attributes,s=Xt(this.attributes,"ribbon"),{min:a,max:l}=this.range,{x:u,y:c}=this.ribbonBBox,{length:h,size:d}=this.ribbonShape,p=E({x:u,y:c,length:h,size:d,type:n,orientation:i,color:r,block:o,partition:e.map(t=>(t.value-a)/(l-a)),range:this.ribbonRange},s);this.ribbon=t.maybeAppendByClassName(Mo.ribbon,()=>new Do({style:p})).update(p)}getHandleClassName(t){return"".concat(Mo.prefix("".concat(t,"-handle")))}renderHandles(){const{showHandle:t,orientation:e}=this.attributes,n=Xt(this.attributes,"handle"),[i,r]=this.selection,o={...n,orientation:e},s=this;this.handlesGroup.selectAll(Mo.handle.class).data(t?[{value:i,type:"start"},{value:r,type:"end"}]:[],t=>t.type).join(t=>t.append(()=>new ko({style:o})).attr("className",t=>{let{type:e}=t;return"".concat(Mo.handle," ").concat(s.getHandleClassName(e))}).each((function(t){let{type:e,value:n}=t;this.update({labelText:n});const i="".concat(e,"Handle");s[i]=this,this.addEventListener("pointerdown",s.onDragStart(e))})),t=>t.update(o).each((function(t){let{value:e}=t;this.update({labelText:e})})),t=>t.each(t=>{let{type:e}=t;const n="".concat(e,"Handle");s[n]=void 0}).remove())}adjustHandles(){const[t,e]=this.selection;this.setHandlePosition("start",t),this.setHandlePosition("end",e)}get handleBBox(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new b(0,0,0,0);const{width:t,height:e}=this.startHandle.getBBox(),{width:n,height:i}=this.endHandle.getBBox(),[r,o]=[Math.max(t,n),Math.max(e,i)];return this.cacheHandleBBox=new b(0,0,r,o),this.cacheHandleBBox}get handleShape(){const{width:t,height:e}=this.handleBBox,[n,i]=this.ifHorizontal([e,t],[t,e]);return{width:t,height:e,size:n,length:i}}setHandlePosition(t,e){const{handleFormatter:n}=this.attributes,{x:i,y:r}=this.ribbonBBox,{size:o}=this.ribbonShape,s=this.getOffset(e),[a,l]=this.ifHorizontal([i+s,r+o*this.handleOffsetRatio],[i+o*this.handleOffsetRatio,r+s]),u=this.handlesGroup.select(".".concat(this.getHandleClassName(t))).node();null==u||u.update({x:a,y:l,formatter:n})}renderIndicator(t){const e=Xt(this.attributes,"indicator");this.indicator=t.maybeAppendByClassName(Mo.indicator,()=>new No({})).update(e)}get labelData(){const{data:t}=this.attributes;return t.reduce((t,e,n,i)=>{var r,o;const s=null!==(r=null==e?void 0:e.id)&&void 0!==r?r:n.toString();if(t.push({...e,id:s,index:n,type:"value",label:null!==(o=null==e?void 0:e.label)&&void 0!==o?o:e.value.toString(),value:this.ribbonScale.map(e.value)}),n<i.length-1){const r=i[n+1],[o,a]=[e.value,r.value],l=(o+a)/2;t.push({...e,id:s,index:n,type:"range",range:[o,a],label:[o,a].join("~"),value:this.ribbonScale.map(l)})}return t},[])}get labelStyle(){let[t,e]=["center","middle"];const n=this.labelPosition;return"top"===n?e="bottom":"bottom"===n?e="top":"left"===n?t="end":"right"===n&&(t="start"),{labelTextAlign:t,labelTextBaseline:e}}renderLabel(t){const{showTick:e=!1,labelFilter:n,labelFormatter:i}=this.attributes,r=Xt(this.attributes,"label"),{align:o}=r,s=Xt(r,"tick"),a=Xt(r,"tick",!0),l={...E({showLine:!1,showGrid:!1,showTick:e,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)",...this.labelStyle},$t(s,"tick"),$t(a,"label"),{data:this.labelData}),...{tickFilter:(t,e,i)=>"value"===(null==t?void 0:t.type)&&(!n||n(t,t.index,i.filter(t=>"value"!==t.type))),labelFilter:(t,e,i)=>(null==t?void 0:t.type)===o&&(!n||n(t,t.index,i.filter(t=>t.type===o))),labelFormatter:i}};this.label=t.maybeAppendByClassName(Mo.label,()=>new ro({style:l})).node(),this.label.update(l,!1)}get labelAxisStyle(){const{showTick:t,labelDirection:e,labelSpacing:n}=this.attributes,{size:i}=this.ribbonShape,r=this.labelPosition,o=this.labelFixedSpacing;let[s,a,l]=[0,0,0];const u=i+n;return t?(l=u,a=o,"positive"===e?"right"===r?(s=u,l=u):"bottom"===r&&(s=l):"negative"===e&&("top"===r||"left"===r)&&(s=i)):"positive"===e?"right"===r?a=u:"bottom"===r&&(s=i+o,a=n):"negative"===e&&("left"===r||"top"===r)&&(a=n),{offset:s,spacing:a,tickLength:l}}adjustLabel(){const{showLabel:t}=this.attributes;if(!t)return;const{x:e,y:n,width:i,height:r}=this.ribbonBBox,{offset:o,spacing:s,tickLength:a}=this.labelAxisStyle,[l,u]=this.ifHorizontal([[e,n+o],[e+i,n+o]],[[e+o,n+r],[e+o,n]]);this.label.update({startPos:l,endPos:u,tickLength:a,labelSpacing:s},!1)}bindEvents(){this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)}showIndicator(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat(t);const{showIndicator:n}=this.attributes;if(!n||"number"!=typeof t)return void this.hideIndicator();const{min:i,max:r}=this.range,{x:o,y:a}=this.ribbonBBox,l=ki(t,i,r),u=this.getOffset(l),c=this.ifHorizontal([u+o,a],[o,u+a]);this.indicator.update({x:c[0],y:c[1],position:this.ifHorizontal("top","left"),labelText:e}),s(this.indicator.node())}hideIndicator(){a(this.indicator.node())}updateMouse(){this.attributes.slidable&&(this.style.cursor="grabbing")}setSelection(t,e){this.updateSelection(t,e)}updateSelection(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[i,r]=this.selection;let[o,s]=[t,e];n&&(o+=i,s+=r);const{min:a,max:l}=this.range;[o,s]=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;const[r,o]=t,[s,a]=e,[l,u]=n;let[c,h]=[s,a];const d=h-c;return c>h&&([c,h]=[h,c]),d>o-r?[r,o]:c<r?l===r&&u===h?[r,h]:[r,d+r]:h>o?u===o&&l===c?[c,o]:[o-d,o]:[lt(c,i),lt(h,i)]}([a,l],[o,s],this.selection),this.update({defaultValue:[o,s]}),this.dispatchSelection()}get step(){const{step:t=1}=this.attributes,{min:e,max:n}=this.range;return ze(t)?lt(.01*(n-e),0):t}getTickValue(t){const{data:e,block:n}=this.attributes,{min:i}=this.range;return n?To(e.map(t=>{let{value:e}=t;return e}),t).tick:function(t,e,n){return n+Math.round((t-n)/e)*e}(t,this.step,i)}getValueByCanvasPoint(t){const{min:e,max:n}=this.range,[i,r]=this.ribbon.node().getPosition(),o=this.ifHorizontal(i,r),s=this.ifHorizontal(...O(t))-o;return ki(this.getOffset(s,!0),e,n)}getOffset(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{min:n,max:i}=this.range,{length:r}=this.ribbonShape,o=this.eventToOffsetScale;return o.update({domain:[n,i],range:[0,r]}),e?o.invert(t):o.map(t)}dispatchSelection(){const t=new i.CustomEvent("valuechange",{detail:{value:this.selection}});this.dispatchEvent(t)}dispatchIndicated(t,e){const n=new i.CustomEvent("indicate",{detail:{value:t,range:e}});this.dispatchEvent(n)}}var Uo,qo,Zo,Ko;function Yo(t){Uo||(Uo=document.createElement("table"),qo=document.createElement("tr"),Zo=/^\s*<(\w+|!)[^>]*>/,Ko={tr:document.createElement("tbody"),tbody:Uo,thead:Uo,tfoot:Uo,td:qo,th:qo,"*":document.createElement("div")});var e=Zo.test(t)&&RegExp.$1;e&&e in Ko||(e="*");var n=Ko[e];t="string"==typeof t?t.replace(/(^\s*)|(\s*$)/g,""):t,n.innerHTML=""+t;var i=n.childNodes[0];return i&&n.contains(i)&&n.removeChild(i),i}var Xo=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]})):t};const $o="tooltip",Jo="tooltip-title",Qo="tooltip-list",ts="tooltip-list-item",es="tooltip-list-item-name",ns="tooltip-list-item-marker",is="tooltip-list-item-name-label",rs="tooltip-list-item-value",os="tooltip-crosshair-x",ss="tooltip-crosshair-y",as={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},ls={[".".concat($o)]:{position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},[".".concat(Jo)]:{color:"rgba(0, 0, 0, 0.45)"},[".".concat(Qo)]:{margin:"0px","list-style-type":"none",padding:"0px"},[".".concat(ts)]:{"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},[".".concat(ns)]:{width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},[".".concat(es)]:{display:"flex","align-items":"center","max-width":"216px"},[".".concat(is)]:{flex:1,...as},[".".concat(rs)]:{display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)",...as},[".".concat(os)]:{position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},[".".concat(ss)]:{position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"}};function us(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class cs extends Se{get HTMLTooltipElement(){return this.element}getContainer(){return this.element}set position(t){let[e,n]=t;this.attributes.x=e,this.attributes.y=n,this.updatePosition()}get elementSize(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}get HTMLTooltipItemsElements(){const{data:t,template:e}=this.attributes;return t.map((t,n)=>{let{name:i="",color:r="black",index:o,...s}=t;const a={name:i,color:r,index:null!=o?o:n,...s};return Yo(Xo(e.item,a))})}constructor(t){super(t,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",defaultPosition:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:{x:0,y:0,width:0,height:0},template:{container:'<div class="'.concat($o,'"></div>'),title:'<div class="'.concat(Jo,'"></div>'),item:'<li class="'.concat(ts,'" data-index={index}>\n        <span class="').concat(es,'">\n          <span class="').concat(ns,'" style="background:{color}"></span>\n          <span class="').concat(is,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(rs,'" title="{value}">{value}</span>\n      </li>')},style:ls}),us(this,"element",void 0),us(this,"prevCustomContentKey",this.attributes.contentKey),this.initShape(),this.render(this.attributes,this)}render(t,e){this.renderHTMLTooltipElement(),this.updatePosition()}destroy(){var t;null===(t=this.element)||void 0===t||t.remove(),super.destroy()}show(t,e){if(void 0!==t&&void 0!==e){const n=this.element.style.transition;this.element.style.transition="none",this.position=[null!=t?t:+this.attributes.x,null!=e?e:+this.attributes.y],setTimeout(()=>{this.element.style.transition=n},10)}this.element.style.visibility="visible"}hide(){this.element.style.visibility="hidden"}initShape(){const{template:t}=this.attributes;this.element=Yo(t.container),this.id&&this.element.setAttribute("id",this.id)}renderCustomContent(){if(void 0!==this.prevCustomContentKey&&this.prevCustomContentKey===this.attributes.contentKey)return;this.prevCustomContentKey=this.attributes.contentKey;const{content:t}=this.attributes;t&&("string"==typeof t?this.element.innerHTML=t:this.element.replaceChildren(t))}renderHTMLTooltipElement(){const{template:t,title:e,enterable:n,style:i,content:r}=this.attributes,o=this.element;if(this.element.style.pointerEvents=n?"auto":"none",r)this.renderCustomContent();else{var s,a;e?(o.innerHTML=t.title,o.getElementsByClassName(Jo)[0].innerHTML=e):null===(s=o.getElementsByClassName(Jo))||void 0===s||null===(a=s[0])||void 0===a||a.remove();const n=this.HTMLTooltipItemsElements,i=document.createElement("ul");i.className=Qo,i.replaceChildren(...n);const r=this.element.querySelector(".".concat(Qo));r?r.replaceWith(i):o.appendChild(i)}Yt(o,i)}getRelativeOffsetFromCursor(t){const{position:e,offset:n}=this.attributes,i=t||e,r=("auto"===i?"bottom-right":i).split("-"),o={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},{width:s,height:a}=this.elementSize;let l=[-s/2,-a/2];return r.forEach(t=>{const[e,i]=l,[r,u]=o[t];l=[e+(s/2+n[0])*r,i+(a/2+n[1])*u]}),l}setOffsetPosition(t){let[e,n]=t;const{x:i=0,y:r=0,container:{x:o,y:s}}=this.attributes;this.element.style.left="".concat(+i+o+e,"px"),this.element.style.top="".concat(+r+s+n,"px")}updatePosition(){this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor()))}autoPosition(t){let[e,n]=t;const{x:i,y:r,bounding:o,position:s,defaultPosition:a}=this.attributes;if("auto"!==s)return[e,n];const{offsetWidth:l,offsetHeight:u}=this.element,[c,h]=[+i+e,+r+n],d={left:"right",right:"left",top:"bottom",bottom:"top"},{x:p,y:f,width:g,height:m}=o,b={left:c<p,right:c+l>p+g,top:h<f,bottom:h+u>f+m},y=[];a.split("-").forEach(t=>{b[t]?y.push(d[t]):y.push(t)});const v=y.join("-");return this.getRelativeOffsetFromCursor(v)}}us(cs,"tag","tooltip"),function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);o>3&&s&&Object.defineProperty(e,n,s)}([ae(100,!0)],cs.prototype,"updatePosition",null);const hs={default:{sizeStyle:{width:44,height:22,radius:11},tagStyle:{textStyle:{fontSize:12,lineHeight:16,fill:"#fff"},padding:0},markerStyle:{size:11}},small:{sizeStyle:{width:28,height:16,radius:8},tagStyle:{textStyle:{fontSize:10,lineHeight:14,fill:"#fff"},padding:0},markerStyle:{size:8}},mini:{sizeStyle:{width:20,height:14,radius:7},tagStyle:{textStyle:{fontSize:7,lineHeight:10,fill:"#fff"},padding:0},markerStyle:{size:7}}};function ds(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ps(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Number(t.style.height)-2*e;return{x:n?Number(t.style.width)+Number(t.style.x)-e-i:Number(t.style.x)+e,y:Number(t.style.y)+e,width:i,height:i,radius:i/2}}class fs extends Se{constructor(t){super(t,{x:0,y:0,size:"default",spacing:2,checked:!0,disabled:!1}),ds(this,"checked",void 0)}render(t,e){const{size:n,spacing:i,disabled:r,checked:o,unCheckedChildren:s,checkedChildren:a}=t;this.attributes;const l=Gt(e).maybeAppendByClassName("switch-content","g").node(),u=l.getLocalBounds(),{sizeStyle:c,tagStyle:h}=ur(hs,n,hs.default),d=r?"no-drop":"pointer",p=o?"#1890FF":"#00000040";let f=c;const g=o?a:s;(a||s)&&Gt(l).maybeAppendByClassName("switch-tag",()=>new _e({})).call(t=>{const e=t.node();e.update({cursor:d,backgroundStyle:null,text:!1,marker:!1,...h,...g});const{max:n,min:i}=null==e?void 0:e.getLocalBounds(),r=n[0]-i[0]+c.radius,s=n[1]-i[1],a=Math.max(r+c.height+2,c.width);f={...c,width:a},e.update(function(t,e){let{width:n,height:i}=e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return{x:o?Number(t.x)+r:Number(t.width)+Number(t.x)-n,y:Number(t.y)+(Number(t.height)-i)/2}}({x:u.min[0],y:u.min[1],width:a,height:f.height},{width:r,height:s},f.radius,o))});const m=Gt(l).maybeAppendByClassName("switch-background","rect").styles({zIndex:(l.style.zIndex||0)-1,x:u.min[0],y:u.min[1],fill:p,cursor:d,fillOpacity:r?.4:1,...f}).node(),b=Gt(l).maybeAppendByClassName("switch-background-stroke","rect").styles({zIndex:(l.style.zIndex||0)-2,x:u.min[0],y:u.min[1],stroke:p,lineWidth:0,...f}).node();Gt(l).maybeAppendByClassName("switch-handle","rect").styles({fill:"#fff",cursor:d}).call(t=>{const e=t.node(),n=ps(m,i,o),r=ps(m,i,!o);var s,a;e.attr("x")&&!Li(n,r)&&this.checked!==o?(e.attr(r),null===(s=e.getAnimations()[0])||void 0===s||s.cancel(),null===(a=b.getAnimations()[0])||void 0===a||a.cancel(),e.animate([{x:r.x},{x:n.x}],{duration:120,fill:"both"}),b.animate([{lineWidth:0,strokeOpacity:.5},{lineWidth:14,strokeOpacity:0}],{duration:400,easing:"ease-on"})):e.attr(n)}),this.checked=!!o}}ds(fs,"tag","switch");const gs={tagText:"",lineStroke:"#416180",lineStrokeOpacity:.45,lineLineWidth:1,lineLineDash:[5,5]},ms=E({},gs,{type:"line",tagPosition:"start",tagAlign:"center",tagVerticalAlign:"bottom"}),bs=E({},gs,{type:"circle",defaultRadius:0}),ys=E({},gs,{type:"polygon",defaultRadius:0,startAngle:0});function vs(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class xs extends Se{get localPointer(){const[t,e]=this.getPosition(),[n,i]=this.pointer;return[n-t,i-e]}get tagStyle(){return Xt(this.attributes,"tag")}get crosshairStyle(){return{...Xt(this.attributes,"line"),path:this.crosshairPath}}constructor(t){super(t,gs),vs(this,"pointer",void 0),vs(this,"shapesGroup",void 0),vs(this,"tagShape",void 0),vs(this,"crosshairShape",void 0)}render(t,e){const n=Gt(e).maybeAppendByClassName(".crosshair-group","g").node();this.shapesGroup=n;const i=this.tagStyle,r=this.crosshairStyle;this.tagShape=Gt(n).maybeAppendByClassName("crosshair-tag",()=>new _e({style:i})).styles(i).node(),this.crosshairShape=Gt(n).maybeAppendByClassName(".crosshair-path","path").styles(r).node(),this.adjustLayout()}setPointer(t){this.pointer=t}}function ws(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}vs(xs,"tag","crosshair-base");class Ss extends xs{get crosshairPath(){const{startPos:[t,e],endPos:[n,i]}=this.attributes;return[["M",0,0],["L",n-t,i-e],["Z"]]}get localPointer(){if(!this.pointer)return this.attributes.startPos;const[t,e]=this.getPosition(),[n,i]=this.pointer;return[n-t,i-e]}get isVertical(){const{startPos:[t,e],endPos:[n,i]}=this.attributes;return t===n&&e!==i}get tagShapeSpace(){const{width:t,height:e}=It(this.tagShape);return{width:t,height:e}}constructor(t){super(E({},Ss.defaultOptions,t))}update(t){super.update(t)}setPointer(t){super.setPointer(t),this.adjustPosition()}setText(t){this.tagShape.update({text:t}),this.adjustTag()}adjustLayout(){this.adjustPosition(),this.adjustTag()}adjustPosition(){const[t,e]=this.localPointer,{startPos:[n,i]}=this.attributes,r=this.getOrientVal([n,e],[t,i]);this.shapesGroup.setLocalPosition(r)}adjustTag(){const{tagText:t,tagPosition:e,startPos:[n,i],endPos:[r,o]}=this.attributes;if(!t||""===t)return void a(this.tagShape);s(this.tagShape);const{width:l,height:u}=this.tagShapeSpace,[c,h]=this.getOrientVal({start:[-l/2,u/2],end:[r-n+l/2,u/2]},{start:[0,0],end:[0,o-i+u]})[e];this.tagShape.setLocalPosition(c,h)}getOrientVal(t,e){return this.isVertical?e:t}}function ks(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ws(Ss,"tag","line-crosshair"),ws(Ss,"defaultOptions",{style:ms});class Ps extends xs{get crosshairPath(){return this.createCirclePath()}constructor(t){super(E({},Ps.defaultOptions,t))}update(t){super.update(t)}setPointer(t){let[e,n]=t;super.setPointer([e,n]);const[i,r]=this.localPointer,{center:[o,s]}=this.attributes,a=this.createCirclePath(((i-o)**2+(r-s)**2)**.5);this.crosshairShape.attr({path:a})}adjustLayout(){a(this.tagShape)}createCirclePath(t){const{center:[e,n],defaultRadius:i}=this.attributes;return ke(e,n,t||i)}}function As(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ks(Ps,"tag","circle-crosshair"),ks(Ps,"defaultOptions",{style:bs});class Ls extends xs{get crosshairPath(){return this.createPolygonPath()}constructor(t){super(E({},Ls.defaultOptions,t))}update(t){super.update(t)}get points(){const{startAngle:t,sides:e}=this.attributes,n=2*Math.PI/e,i=[1,0],r=[];for(let o=0;o<e;o+=1)r.push(st(i,[0,0],t/180*Math.PI+n*o));return r}setPointer(t){let[e,n]=t;super.setPointer([e,n]);const[i,r]=this.localPointer,{center:o}=this.attributes,[s,a]=this.intersection([i,r]);if(!s||!a)return;const l=H(o,[i,r])/H(o,[s,a]),u=this.createPolygonPath(l);this.crosshairShape.attr({path:u})}adjustLayout(){a(this.tagShape)}createPolygonPath(t){const{defaultRadius:e,center:[n,i]}=this.attributes,r=this.points.map((r,o)=>{let[s,a]=r;const[l,u]=Q([s,a],t||e);return[0===o?"M":"L",n+l,i+u]});return r.push(["Z"]),r}intersection(t){let[e,n]=t;const{points:i}=this,{center:[r,o]}=this.attributes;let s,a;for(let t=1;t<=i.length;t+=1){const[l,u]=i[t-1],[c,h]=i[t%i.length],d=G([e,n],[r,o],[l+r,u+o],[c+r,h+o]);0!==d.length&&([s,a]=d)}return[s,a]}}As(Ls,"tag","polygon-crosshair"),As(Ls,"defaultOptions",{style:ys});const Ms=$t({fill:"rgba(0,0,0,0.45)",fontSize:10,textAlign:"start",textBaseline:"middle",overflow:"clip"},"label"),Es={width:12,height:12,radius:2,stroke:"#dadada",lineWidth:1,fill:"#ffffff",cursor:"pointer"},Cs={width:12,height:12,radius:2,stroke:"#3471F9",lineWidth:1,fill:"#3471F9",cursor:"pointer"},Bs={path:[["M",3,6],["L","5","8.5"],["L","8.5","4"]],lineWidth:1,cursor:"pointer"};function Os(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class js extends Se{constructor(t){super(t,{x:0,y:0,labelText:"",spacing:4,checked:!1,...Ms}),Os(this,"checkboxBoxShape",void 0),Os(this,"checked",void 0)}render(t,e){const{checked:n,spacing:i}=t;this.checked=!!n;const r=Ht(e,".checkbox-content","g").attr("className","checkbox-content").node(),o=Xt(t,"box"),s=Xt(t,"checked"),a=Xt(t,"label"),l={...this.checked?Cs:Es,...o},u={...Bs,...s};this.checkboxBoxShape=Ht(r,".checkbox-box","rect").styles({className:"checkbox-box",zIndex:(r.style.zIndex||0)-1,...l}).node(),Ht(this.checkboxBoxShape,".checkbox-checked","path").styles({className:"checkbox-box-checked",stroke:"#fff",...u});const{x:c,y:h}=function(t,e){const n=t.getLocalBounds();return{x:n.halfExtents[0]?n.max[0]+(e||0):t.style.x,y:n.halfExtents[1]?(n.min[1]+n.max[1])/2:t.style.y}}(this.checkboxBoxShape,Number(i));Ht(r,".checkbox-label","text").styles({className:"checkbox-label",x:c,y:h,...a})}}function Ns(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}Os(js,"tag","checkbox");var Ts=function(t){return t instanceof Element||t instanceof HTMLDocument};const _s="gui-poptip",zs="gui-poptip-arrow",Gs="gui-poptip-text",Hs={[".".concat(_s)]:{visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},[".".concat(Gs)]:{"text-align":"center"},[".".concat(_s,"[data-position='top']")]:{transform:"translate(-50%, -100%)"},[".".concat(_s,"[data-position='left']")]:{transform:"translate(-100%, -50%)"},[".".concat(_s,"[data-position='right']")]:{transform:"translate(0, -50%)"},[".".concat(_s,"[data-position='bottom']")]:{transform:"translate(-50%, 0)"},[".".concat(_s,"[data-position='top-left']")]:{transform:"translate(0,-100%)"},[".".concat(_s,"[data-position='top-right']")]:{transform:"translate(-100%,-100%)"},[".".concat(_s,"[data-position='left-top']")]:{transform:"translate(-100%, 0)"},[".".concat(_s,"[data-position='left-bottom']")]:{transform:"translate(-100%, -100%)"},[".".concat(_s,"[data-position='right-top']")]:{transform:"translate(0, 0)"},[".".concat(_s,"[data-position='right-bottom']")]:{transform:"translate(0, -100%)"},[".".concat(_s,"[data-position='bottom-left']")]:{transform:"translate(0, 0)"},[".".concat(_s,"[data-position='bottom-right']")]:{transform:"translate(-100%, 0)"},[".".concat(zs)]:{width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},[".".concat(_s,"[data-position='top']")]:{transform:"translate(-50%, calc(-100% - 5px))"},["[data-position='top'] .".concat(zs)]:{bottom:"-2px"},[".".concat(_s,"[data-position='left']")]:{transform:"translate(calc(-100% - 5px), -50%)"},["[data-position='left'] .".concat(zs)]:{right:"-2px"},[".".concat(_s,"[data-position='right']")]:{transform:"translate(5px, -50%)"},["[data-position='right'] .".concat(zs)]:{left:"-2px"},[".".concat(_s,"[data-position='bottom']")]:{transform:"translate(-50%, 5px)"},["[data-position='bottom'] .".concat(zs)]:{top:"-2px"},[".".concat(_s,"[data-position='top-left']")]:{transform:"translate(0, calc(-100% - 5px))"},["[data-position='top-left'] .".concat(zs)]:{left:"10px",bottom:"-2px"},[".".concat(_s,"[data-position='top-right']")]:{transform:"translate(-100%, calc(-100% - 5px))"},["[data-position='top-right'] .".concat(zs)]:{right:"10px",bottom:"-2px"},[".".concat(_s,"[data-position='left-top']")]:{transform:"translate(calc(-100% - 5px), 0)"},["[data-position='left-top'] .".concat(zs)]:{right:"-2px",top:"8px"},[".".concat(_s,"[data-position='left-bottom']")]:{transform:"translate(calc(-100% - 5px), -100%)"},["[data-position='left-bottom'] .".concat(zs)]:{right:"-2px",bottom:"8px"},[".".concat(_s,"[data-position='right-top']")]:{transform:"translate(5px, 0)"},["[data-position='right-top'] .".concat(zs)]:{left:"-2px",top:"8px"},[".".concat(_s,"[data-position='right-bottom']")]:{transform:"translate(5px, -100%)"},["[data-position='right-bottom'] .".concat(zs)]:{left:"-2px",bottom:"8px"},[".".concat(_s,"[data-position='bottom-left']")]:{transform:"translate(0, 5px)"},["[data-position='bottom-left'] .".concat(zs)]:{top:"-2px",left:"8px"},[".".concat(_s,"[data-position='bottom-right']")]:{transform:"translate(-100%, 5px)"},["[data-position='bottom-right'] .".concat(zs)]:{top:"-2px",right:"8px"}};function Fs(t){let e=t&&document.getElementById(t);return e||(e=document.createElement("div"),e.setAttribute("id",t),document.body.appendChild(e)),e}function Is(t){return(t=>{let e;return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e||(e=t.apply(void 0,i)),e}})(Fs)(t)}function Ds(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Vs extends Se{get visible(){return"visible"===this.visibility}constructor(t){super(He({style:{id:"gui-poptip"}},Vs.defaultOptions,t)),Ds(this,"container",void 0),Ds(this,"visibility","visible"),Ds(this,"map",new Map),Ds(this,"domStyles",""),this.initShape(),this.render(this.attributes,this)}render(t,e){this.visibility=this.style.visibility,this.updatePoptipElement()}update(t){this.attr(He({},this.style,t)),this.render(this.attributes,this)}bind(t,e){if(!t)return;const{text:n}=this.style,i=i=>{let r=t,o=this.style,s=n;if(e){const{html:t,target:n,...h}="function"==typeof e?e.call(null,i):e;a={},l=this.style,u=h,l&&Ns(a,l),u&&Ns(a,u),c&&Ns(a,c),o=a,(n||!1===n)&&(r=n),"string"==typeof t&&(s=t)}var a,l,u,c;const{position:h,arrowPointAtCenter:d,follow:p,offset:f}=o;if(r){const{clientX:t,clientY:e}=i,[n,o]=function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(o)return[t,e];const{x:s,y:a,width:l,height:u}=n.getBoundingClientRect();switch(i){case"top":return r?[s+l/2,a]:[t,a];case"left":return r?[s,a+u/2]:[s,e];case"bottom":return r?[s+l/2,a+u]:[t,a+u];case"right":return r?[s+l,a+u/2]:[s+l,e];case"top-right":case"right-top":return[s+l,a];case"left-bottom":case"bottom-left":return[s,a+u];case"right-bottom":case"bottom-right":return[s+l,a+u];case"top-left":case"left-top":default:return[s,a]}}(t,e,r,h,d,p);this.showTip(n,o,{text:s,position:h,offset:f})}else this.hideTip()},r=()=>{this.hideTip()};t.addEventListener("mousemove",i),t.addEventListener("mouseleave",r),this.map.set(t,[i,r])}unbind(t){if(this.map.has(t)){const[e,n]=this.map.get(t)||[];e&&t.removeEventListener("mousemove",e),n&&t.removeEventListener("mouseleave",n),this.map.delete(t)}}clear(){this.container.innerHTML=""}destroy(){var t;[...this.map.keys()].forEach(t=>this.unbind(t)),null===(t=this.container)||void 0===t||t.remove(),super.destroy()}showTip(t,e,n){const i=ur(n,"text");if((!i||"string"==typeof i)&&(this.applyStyles(),t&&e&&n)){const{offset:r,position:o}=n;if(o&&this.container.setAttribute("data-position",o),this.setOffsetPosition(t,e,r),"string"==typeof i){const t=this.container.querySelector(".".concat(Gs));t&&(t.innerHTML=i)}this.visibility="visible",this.container.style.visibility="visible"}}hideTip(){this.visibility="hidden",this.container.style.visibility="hidden"}getContainer(){return this.container}getClassName(){const{containerClassName:t}=this.style;return"".concat(_s).concat(t?" ".concat(t):"")}initShape(){const{id:t}=this.style;this.container=Is(t),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",()=>this.showTip()),this.container.addEventListener("mouseleave",()=>this.hideTip())}updatePoptipElement(){const{container:t}=this;this.clear();const{id:e,template:n,text:i}=this.style;this.container.setAttribute("id",e),this.container.className=this.getClassName();const r='<span class="'.concat(zs,'"></span>');t.innerHTML=r,j(n)?t.innerHTML+=n:n&&Ts(n)&&t.appendChild(n),i&&(t.getElementsByClassName(Gs)[0].textContent=i),this.applyStyles(),this.container.style.visibility=this.visibility}applyStyles(){const t=E({},Hs,this.style.domStyles),e=Object.entries(t).reduce((t,e)=>{let[n,i]=e;const r=Object.entries(i).reduce((t,e)=>{let[n,i]=e;return"".concat(t).concat(n,": ").concat(i,";")},"");return"".concat(t).concat(n,"{").concat(r,"}")},"");if(this.domStyles!==e){this.domStyles=e;let t=this.container.querySelector("style");t&&this.container.removeChild(t),t=document.createElement("style"),t.innerHTML=e,this.container.appendChild(t)}}setOffsetPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.style.offset;const[i=0,r=0]=n;this.container.style.left="".concat(t+i,"px"),this.container.style.top="".concat(e+r,"px")}}function Ws(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ds(Vs,"tag","poptip"),Ds(Vs,"defaultOptions",{style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:Hs,template:'<div class="'.concat(Gs,'"></div>')}});class Rs extends i.Group{set margin(t){this.$margin=Ft(t)}get margin(){return this.$margin}set padding(t){this.$padding=Ft(t)}get padding(){return this.$padding}getBBox(){const{x:t=0,y:e=0,width:n,height:i}=this.attributes,[r,o,s,a]=this.$margin;return new b(t-a,e-r,n+a+o,i+r+s)}appendChild(t,e){return t.isMutationObserved=!0,super.appendChild(t,e),t}getAvailableSpace(){const{width:t,height:e}=this.attributes,[n,i,r,o]=this.$padding,[s,,,a]=this.$margin;return new b(o+a,n+s,t-o-i,e-n-r)}constructor(t){super(t),Ws(this,"layoutEvents",[i.ElementEvent.BOUNDS_CHANGED,i.ElementEvent.INSERTED,i.ElementEvent.REMOVED]),Ws(this,"$margin",Ft(0)),Ws(this,"$padding",Ft(0));const{margin:e=0,padding:n=0}=t.style||{};this.margin=e,this.padding=n,this.isMutationObserved=!0,this.bindEvents()}layout(){if(this.attributes.display&&this.isConnected&&!this.children.some(t=>!t.isConnected))try{const t=J(this.getAvailableSpace(),this.children.map(t=>t.getBBox()),this.attributes);this.children.forEach((e,n)=>{const{x:i,y:r}=t[n];e.attr({x:i,y:r})})}catch(t){}}bindEvents(){this.layoutEvents.forEach(t=>{this.addEventListener(t,t=>{t.target.isMutationObserved=!0,this.layout()})})}attributeChangedCallback(t,e,n){"margin"===t?this.margin=n:"padding"===t&&(this.padding=n),this.layout()}}i.runtime.enableCSSParsing=!1}])}));